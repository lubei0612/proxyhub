# 🚀 ProxyHub 本地测试 - 快速开始

> ✅ 所有Phase已完成（10/10）  
> 📦 扩展测试数据已准备  
> 🎯 准备开始验收测试

---

## ⚡ 快速启动（3步完成）

### 方式1：一键启动（推荐）⭐

```bash
# Windows用户：双击运行
启动本地测试.bat

# 或在PowerShell/CMD中运行
.\启动本地测试.bat
```

**脚本会自动完成：**
1. ✅ 检查并创建 `.env` 文件
2. ✅ 启动所有Docker服务（PostgreSQL + Redis + Backend + Frontend）
3. ✅ 等待服务启动（30秒）
4. ✅ 初始化基础测试数据（5用户 + 3IP + 系统配置）
5. ✅ 初始化扩展测试数据（20+IP + 10订单 + 15充值订单 + 30交易记录）

### 方式2：手动启动

```bash
# 1. 检查环境变量
cp docs/ENV_TEMPLATE.txt .env

# 2. 启动Docker服务
docker-compose up -d

# 3. 等待30秒让服务启动

# 4. 初始化测试数据
docker exec -it proxyhub-backend npm run seed
docker exec -it proxyhub-backend npm run seed:extended
```

---

## 🌐 访问地址

启动成功后，访问以下地址：

- **前端**：http://localhost
- **后端API**：http://localhost:3000/api/v1
- **API文档（Swagger）**：http://localhost:3000/api/v1/docs

---

## 🔑 测试账号

### 普通用户（主要测试账号）⭐

```
邮箱：user@example.com
密码：password123
余额：$1,000

已有测试数据：
- 20+ 个静态IP（不同国家和城市）
- 10 个订单（不同状态）
- 15 个充值订单（待审核/已批准/已拒绝）
- 30 条交易记录（充值/购买/退款）
```

### 管理员账号

```
邮箱：admin@example.com
密码：admin123
余额：$10,000

用于测试：
- 用户管理
- 充值审批
- 价格覆盖管理
- 系统设置
```

### 其他测试用户

```
alice@test.com / password123 (余额：$500)
bob@test.com / password123 (余额：$2,000)
charlie@test.com / password123 (余额：$100)
```

---

## ✅ 测试清单

### 1️⃣ 用户功能测试（15分钟）

- [ ] **登录**：使用 `user@example.com` 登录
- [ ] **语言切换**：点击右上角地球图标，切换中英文
- [ ] **仪表盘**：查看3个图表（柱状图、饼图、折线图）

### 2️⃣ 静态代理测试（20分钟）

- [ ] **静态IP选购**
  - 选择IP类型（普通/原生）
  - 选择时长（30/60/90/180/360天）
  - 选择业务场景
  - 选择国家和城市（4列卡片网格）
  - 设置购买数量
  - 查看支付面板（sticky效果）
  - 提交订单

- [ ] **静态IP管理**
  - 查看20+个IP列表
  - 筛选功能（国家、城市、IP类型）
  - 批量选择
  - 批量导出（CSV、TXT）
  - 单个IP续费
  - 单个IP释放

### 3️⃣ 账单测试（15分钟）

- [ ] **交易记录**：查看30+条记录
- [ ] **充值订单**：查看15+个订单，不同状态
  - 筛选：按状态、支付方式、金额、时间
  - 查看详情
  - 导出CSV

### 4️⃣ 钱包测试（10分钟）

- [ ] **钱包充值**
  - 输入充值金额
  - 快捷金额选择
  - 查看充值预览（USD → CNY汇率换算）
  - 选择支付方式（4种）
  - 输入备注
  - 提交充值申请

### 5️⃣ 管理后台测试（20分钟）

**退出登录，使用管理员账号登录**

- [ ] **用户管理**：查看5个用户
- [ ] **充值审批**
  - 查看15+个充值订单
  - 批准充值（用户余额自动更新）
  - 拒绝充值（输入拒绝原因）
- [ ] **价格覆盖管理**
  - 查看3个价格覆盖（日本、韩国、新加坡）
  - 创建新覆盖
  - 编辑覆盖
  - 删除覆盖
- [ ] **系统设置**：修改USD→CNY汇率

### 6️⃣ 多语言和响应式测试（10分钟）

- [ ] **多语言**
  - 切换为English
  - 切换为简体中文
  - 刷新页面，语言设置保持

- [ ] **响应式设计**
  - 缩放浏览器窗口
  - 查看静态IP选购页面（4列→3列→2列）
  - 查看表格横向滚动

---

## 🐛 常见问题

### 问题1：服务启动失败

```bash
# 查看日志
docker-compose logs -f

# 重启服务
docker-compose restart

# 完全重建
docker-compose down -v
docker-compose up -d --build
```

### 问题2：登录失败或数据为空

```bash
# 重新运行种子数据
docker exec -it proxyhub-backend npm run seed
docker exec -it proxyhub-backend npm run seed:extended
```

### 问题3：前端页面空白

```bash
# 清除浏览器缓存
# 按 Ctrl+Shift+R 强制刷新

# 或重建前端容器
docker-compose restart frontend
```

---

## 🗑️ 清理测试数据

### 方式1：一键清理（推荐）⭐

```bash
# Windows用户：双击运行
清理测试数据.bat
```

**会自动：**
1. 停止所有服务
2. 删除数据卷（清空数据库）
3. 重新启动服务
4. 只初始化基础数据（不包含扩展测试数据）

### 方式2：手动清理

```bash
# 停止并删除所有服务和数据
docker-compose down -v

# 删除数据卷
docker volume rm proxyhub_postgres_data

# 重新启动
docker-compose up -d

# 只运行基础种子数据
docker exec -it proxyhub-backend npm run seed
```

---

## 📊 测试数据说明

### 基础数据（生产环境可保留）

- 5个测试用户
- 3个静态IP
- 2个订单
- 3个充值订单
- 2条交易记录
- 3个价格覆盖配置（日本、韩国、新加坡）
- 系统设置（汇率、Telegram客服等）

### 扩展数据（测试用，生产环境需删除）

- 20+ 个静态IP（8个国家，不同城市）
- 10 个订单（不同类型和状态）
- 15 个充值订单（不同支付方式和状态）
- 30 条交易记录（充值、购买、退款）

---

## 🎯 测试目标

- [ ] 所有核心功能正常运行
- [ ] 无严重Bug或阻塞性问题
- [ ] 界面美观，无样式问题
- [ ] 多语言切换正常
- [ ] 响应式设计正常
- [ ] 性能响应时间 < 2秒

---

## ✅ 测试通过后

1. **清理测试数据**
   - 运行 `清理测试数据.bat`
   - 或按照上面的手动清理步骤

2. **准备腾讯云部署**
   - 参考 `docs/FINAL_DELIVERY_SUMMARY.md`
   - 配置真实的985Proxy API Key
   - 配置域名和SSL证书

3. **生产环境测试**
   - 使用真实API测试购买流程
   - 测试充值审批流程

4. **上线**
   - 创建生产管理员账号
   - 配置系统设置
   - 通知用户开始使用

---

## 📚 详细文档

- **完整测试指南**：`docs/LOCAL_TESTING_GUIDE.md`
- **最终交付总结**：`docs/FINAL_DELIVERY_SUMMARY.md`
- **环境变量模板**：`docs/ENV_TEMPLATE.txt`
- **985Proxy API文档**：`docs/985Proxy 开放 API 文档.md`

---

## 🆘 需要帮助？

- **Telegram客服**：@lubei12
- **GitHub Issues**：提交问题到项目仓库
- **查看日志**：`docker-compose logs -f`

---

## 🎉 祝测试顺利！

**ProxyHub 团队**

---

**⏱️ 预计测试时间：90分钟**

