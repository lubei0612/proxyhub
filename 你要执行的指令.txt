========================================
  ProxyHub 部署指令
  请按照以下步骤操作
========================================

╔══════════════════════════════════════╗
║  第一步：推送代码到GitHub（本地）    ║
╚══════════════════════════════════════╝

在你的电脑（本地）执行：

git push origin master

（如果遇到权限问题，可能需要输入GitHub用户名和密码）

========================================

╔══════════════════════════════════════╗
║  第二步：登录服务器                   ║
╚══════════════════════════════════════╝

ssh root@你的服务器IP
# 或
ssh 你的用户名@你的服务器IP

========================================

╔══════════════════════════════════════╗
║  第三步：安装Docker（如果未安装）     ║
╚══════════════════════════════════════╝

在服务器上执行：

curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# 安装Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 验证安装
docker --version
docker-compose --version

========================================

╔══════════════════════════════════════╗
║  第四步：克隆项目并配置               ║
╚══════════════════════════════════════╝

在服务器上执行：

# 克隆项目
git clone https://github.com/lubei0612/proxyhub.git
cd proxyhub

# 复制环境变量模板
cp .env.example .env

# 编辑环境变量
nano .env

【必须修改的配置】按 i 进入编辑模式：

找到以下几行并修改：

DATABASE_PASSWORD=改成你的强密码（例如：MyStr0ngP@ssw0rd123）
JWT_SECRET=改成一个至少32个字符的随机字符串
PROXY_985_API_KEY=改成你的985Proxy API密钥
PROXY_985_ZONE=改成你的Zone ID

修改完成后：
1. 按 Esc
2. 输入 :wq
3. 按 Enter 保存退出

========================================

╔══════════════════════════════════════╗
║  第五步：一键部署                     ║
╚══════════════════════════════════════╝

在服务器上执行：

chmod +x deploy.sh
./deploy.sh

等待3-5分钟，脚本会自动完成所有部署！

========================================

╔══════════════════════════════════════╗
║  第六步：验证部署                     ║
╚══════════════════════════════════════╝

# 检查容器状态（应该都显示Up）
docker-compose ps

# 测试API
curl http://localhost/api/v1/health

# 在浏览器访问
http://你的服务器IP

========================================

╔══════════════════════════════════════╗
║  默认测试账号                         ║
╚══════════════════════════════════════╝

管理员账号：
  邮箱：admin@proxyhub.com
  密码：admin123456

⚠️ 登录后立即修改密码！

========================================

╔══════════════════════════════════════╗
║  生成JWT密钥的命令（可选）            ║
╚══════════════════════════════════════╝

如果需要生成JWT密钥，在服务器执行：

openssl rand -base64 48

复制生成的字符串到.env文件的JWT_SECRET

========================================

╔══════════════════════════════════════╗
║  常用管理命令                         ║
╚══════════════════════════════════════╝

# 查看日志
docker-compose logs -f

# 重启服务
docker-compose restart

# 停止服务
docker-compose down

# 查看容器状态
docker-compose ps

========================================

╔══════════════════════════════════════╗
║  如果遇到问题                         ║
╚══════════════════════════════════════╝

查看详细日志：
docker-compose logs backend
docker-compose logs frontend
docker-compose logs postgres

完全重置（会删除数据）：
docker-compose down -v
./deploy.sh

========================================

📚 详细文档位置：
- 部署指南：DEPLOYMENT-GUIDE.md
- 快速部署：SERVER-QUICK-DEPLOY.md
- 命令清单：SERVER-COMMANDS.txt

🎉 部署成功后就可以开始使用了！
