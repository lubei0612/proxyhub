{
  "id": "snapshot_1762746402947_utrsg1snu",
  "approvalId": "approval_1762746402922_sw60lwkfp",
  "approvalTitle": "Tasks: Mobile Enhancement Implementation Plan - 54 Detailed Tasks",
  "version": 1,
  "timestamp": "2025-11-10T03:46:42.947Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Tasks Document\r\n\r\n## Overview\r\n\r\nThis tasks document breaks down the implementation of three major features:\r\n1. Business Scenario Selector Integration (StaticBuy.vue)\r\n2. User-Level Price Override Management (UserPriceOverrideModal.vue + Users.vue)\r\n3. Mobile Responsive Improvements (7 pages)\r\n\r\nEach task includes file locations, leveraged components, and success criteria.\r\n\r\n---\r\n\r\n## Phase 1: Backend API & Database\r\n\r\n### Task 1.1: Add user_id column to price_override table\r\n- [ ] 1.1 Add user_id column to price_override table\r\n  - File: `backend/src/migrations/[timestamp]-AddUserIdToPriceOverride.ts`\r\n  - Create TypeORM migration to add `user_id` column (nullable) to `price_override` table\r\n  - Add index on `user_id` for query performance\r\n  - Purpose: Enable user-specific price overrides alongside global overrides\r\n  - _Leverage: Existing migration patterns in `backend/src/migrations/`_\r\n  - _Requirements: Requirement 2 (User-Level Price Override Management)_\r\n  - _Prompt: Role: Database Administrator with TypeORM expertise | Task: Create TypeORM migration to add nullable user_id column to price_override table with index following requirement 2, using existing migration patterns | Restrictions: Must not break existing data, ensure backward compatibility, use TypeORM query builder | Success: Migration runs successfully up and down, user_id column added with index, no data loss_\r\n\r\n### Task 1.2: Add business list endpoint to Proxy985Controller\r\n- [ ] 1.2 Add business list endpoint to Proxy985Controller\r\n  - File: `backend/src/modules/proxy985/proxy985.controller.ts`\r\n  - Add `GET /api/v1/proxy985/business-list` endpoint\r\n  - Call `Proxy985Service.getBusinessList()` (already implemented)\r\n  - Add JWT auth guard\r\n  - Purpose: Expose 985Proxy business scenarios to frontend\r\n  - _Leverage: `proxy985.service.ts` already has `getBusinessList()` method (line 275)_\r\n  - _Requirements: Requirement 1 (Business Scenario Selector Integration)_\r\n  - _Prompt: Role: Backend Developer with NestJS expertise | Task: Add GET /business-list endpoint to Proxy985Controller following requirement 1, calling existing getBusinessList() method from Proxy985Service with JWT authentication | Restrictions: Must use existing service method, add proper guards, follow controller patterns | Success: Endpoint returns business scenarios correctly, authenticated users can access, returns proper error for unauthorized requests_\r\n\r\n### Task 1.3: Verify getUserIpPool endpoint includes user-specific overrides\r\n- [ ] 1.3 Verify getUserIpPool endpoint includes user-specific overrides\r\n  - File: `backend/src/modules/pricing/pricing.service.ts`\r\n  - Review `getUserIpPoolForPriceOverride(userId)` method\r\n  - Ensure it queries `price_override` table with `WHERE user_id = :userId OR user_id IS NULL`\r\n  - Priority logic: user-specific override > global override > base price\r\n  - Purpose: Ensure user IP pool API returns correct prices\r\n  - _Leverage: Existing `getUserIpPoolForPriceOverride()` method, may only need query adjustment_\r\n  - _Requirements: Requirement 2 (User-Level Price Override Management)_\r\n  - _Prompt: Role: Backend Developer with TypeORM and pricing logic expertise | Task: Review and enhance getUserIpPoolForPriceOverride method in PricingService to query both user-specific and global price overrides following requirement 2, implementing priority logic | Restrictions: Must maintain existing API contract, ensure correct price priority, optimize query performance | Success: Method returns IP pool with correct pricing priority, user-specific prices override global prices, API response format unchanged_\r\n\r\n### Task 1.4: Verify batchUpdateUserPriceOverrides method\r\n- [ ] 1.4 Verify batchUpdateUserPriceOverrides method\r\n  - File: `backend/src/modules/pricing/pricing.service.ts`\r\n  - Review `batchUpdateUserPriceOverrides(userId, updates)` method\r\n  - Ensure upserts include `userId` in WHERE clause and INSERT data\r\n  - Add transaction handling for atomic batch updates\r\n  - Purpose: Ensure batch updates correctly save user-specific overrides\r\n  - _Leverage: Existing `batchUpdateUserPriceOverrides()` method (controller already exists)_\r\n  - _Requirements: Requirement 2 (User-Level Price Override Management)_\r\n  - _Prompt: Role: Backend Developer with database transaction expertise | Task: Review and enhance batchUpdateUserPriceOverrides method to correctly handle user-specific price overrides with transaction safety following requirement 2 | Restrictions: Must maintain atomic operations, ensure userId is properly filtered, handle concurrent updates | Success: Method saves user-specific overrides correctly, transactions rollback on error, no race conditions in concurrent updates_\r\n\r\n---\r\n\r\n## Phase 2: Frontend - Business Scenario Selector\r\n\r\n### Task 2.1: Add business scenario state to StaticBuy.vue\r\n- [ ] 2.1 Add business scenario state to StaticBuy.vue\r\n  - File: `frontend/src/views/proxy/StaticBuy.vue`\r\n  - Add reactive state: `selectedScenario = ref('')`, `businessScenarios = ref([])`\r\n  - Create `loadBusinessScenarios()` function to call API\r\n  - Call `loadBusinessScenarios()` in `onMounted` hook\r\n  - Purpose: Prepare state management for business scenario selector\r\n  - _Leverage: Existing Vue 3 Composition API patterns in StaticBuy.vue_\r\n  - _Requirements: Requirement 1.1 (Business Scenario Selector)_\r\n  - _Prompt: Role: Frontend Developer with Vue 3 Composition API expertise | Task: Add business scenario state management to StaticBuy.vue following requirement 1.1, creating reactive state and API loading function using existing patterns | Restrictions: Must use Composition API, handle loading and error states, maintain existing functionality | Success: State properly initialized, scenarios load on component mount, error handling in place, no existing features broken_\r\n\r\n### Task 2.2: Add business scenario el-select component\r\n- [ ] 2.2 Add business scenario el-select component\r\n  - File: `frontend/src/views/proxy/StaticBuy.vue` (template section)\r\n  - Add `<el-select>` above IP selection grid\r\n  - Bind to `selectedScenario` with `v-model`\r\n  - Add \"全部场景\" (All Scenarios) option with empty value\r\n  - Add scenario change handler: `@change=\"handleScenarioChange\"`\r\n  - Purpose: Provide UI for users to select business scenarios\r\n  - _Leverage: Existing Element Plus select components in the codebase_\r\n  - _Requirements: Requirement 1.1 (Business Scenario Selector)_\r\n  - _Prompt: Role: Frontend Developer with Element Plus expertise | Task: Add business scenario selector UI to StaticBuy.vue following requirement 1.1, using Element Plus select component with proper bindings and change handlers | Restrictions: Must follow existing UI patterns, ensure mobile-friendly sizing, maintain consistent styling | Success: Selector displays correctly, scenarios populate from state, change event triggers properly, \"All Scenarios\" option works_\r\n\r\n### Task 2.3: Implement scenario filtering in loadInventory\r\n- [ ] 2.3 Implement scenario filtering in loadInventory\r\n  - File: `frontend/src/views/proxy/StaticBuy.vue` (script section)\r\n  - Modify `loadInventory()` function to pass `purpose_web` parameter when `selectedScenario` is set\r\n  - Call `proxy985.getInventory({ static_proxy_type, purpose_web: selectedScenario.value })`\r\n  - Update inventory display after filtering\r\n  - Purpose: Filter IP inventory based on selected business scenario\r\n  - _Leverage: Existing `loadInventory()` function and `proxy985.getInventory()` API call_\r\n  - _Requirements: Requirement 1.2 (Inventory filtering by scenario)_\r\n  - _Prompt: Role: Frontend Developer with API integration expertise | Task: Enhance loadInventory function to pass purpose_web parameter for scenario filtering following requirement 1.2, modifying existing API call | Restrictions: Must maintain existing functionality when no scenario selected, handle API errors gracefully, update UI properly | Success: Inventory filtered correctly when scenario selected, all scenarios option shows full inventory, API errors handled with user-friendly messages_\r\n\r\n### Task 2.4: Add loading state and error handling\r\n- [ ] 2.4 Add loading state and error handling\r\n  - File: `frontend/src/views/proxy/StaticBuy.vue`\r\n  - Add loading state for business scenario fetch\r\n  - Add error handling with `ElMessage.error()` for API failures\r\n  - Disable selector during loading\r\n  - Purpose: Provide user feedback during API operations\r\n  - _Leverage: Existing loading patterns with `v-loading` directive_\r\n  - _Requirements: Non-Functional Requirement (Error Handling)_\r\n  - _Prompt: Role: Frontend Developer with UX focus | Task: Implement loading states and error handling for business scenario selector following non-functional requirements, using existing loading patterns | Restrictions: Must use Element Plus loading directive, provide clear error messages, do not block user from continuing | Success: Loading indicator displays during API calls, error messages are clear and actionable, selector disabled during loading_\r\n\r\n---\r\n\r\n## Phase 3: Frontend - User Price Override Modal\r\n\r\n### Task 3.1: Create UserPriceOverrideModal.vue component file\r\n- [ ] 3.1 Create UserPriceOverrideModal.vue component file\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue` (new file)\r\n  - Create basic component structure with `<template>`, `<script setup>`, `<style scoped>`\r\n  - Define props: `userId`, `userName`, `visible`\r\n  - Define emits: `update:visible`, `saved`\r\n  - Purpose: Create reusable modal component for user price overrides\r\n  - _Leverage: Modal patterns from existing components_\r\n  - _Requirements: Requirement 2 (User-Level Price Override Management)_\r\n  - _Prompt: Role: Vue.js Component Developer | Task: Create new UserPriceOverrideModal.vue component with proper structure following requirement 2, defining props and emits for modal behavior | Restrictions: Must use Vue 3 Composition API with script setup, follow existing component patterns, ensure proper TypeScript types | Success: Component file created with correct structure, props and emits properly defined, TypeScript types correct_\r\n\r\n### Task 3.2: Implement el-dialog wrapper and header\r\n- [ ] 3.2 Implement el-dialog wrapper and header\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue` (template)\r\n  - Add `<el-dialog>` with `v-model=\"visible\"`, `@close` handler\r\n  - Add dialog title: \"价格覆盖 - {userName}\"\r\n  - Set dialog width: `90%` (mobile-friendly)\r\n  - Add footer with \"取消\" and \"保存\" buttons\r\n  - Purpose: Create modal dialog wrapper with proper controls\r\n  - _Leverage: Element Plus dialog component, similar to patterns in existing modals_\r\n  - _Requirements: Requirement 2.2 (Modal dialog display)_\r\n  - _Prompt: Role: Frontend Developer with Element Plus expertise | Task: Implement dialog wrapper and header for UserPriceOverrideModal following requirement 2.2, using Element Plus dialog component | Restrictions: Must handle close events properly, ensure responsive width, follow existing modal patterns | Success: Dialog opens and closes correctly, header displays username, buttons trigger proper actions, responsive on mobile_\r\n\r\n### Task 3.3: Copy IP card grid layout from PriceOverrides.vue\r\n- [ ] 3.3 Copy IP card grid layout from PriceOverrides.vue\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue` (template + style)\r\n  - Copy `.ip-cards-grid` structure from `PriceOverrides.vue` (lines 96-170)\r\n  - Copy card styles (`.ip-card`, `.card-header-section`, `.price-section`)\r\n  - Adapt for modal context (smaller padding, mobile optimization)\r\n  - Purpose: Reuse proven card-based IP display pattern\r\n  - _Leverage: `frontend/src/views/admin/PriceOverrides.vue` lines 96-170 and styles_\r\n  - _Requirements: Requirement 2.3 (Display IP pool as cards)_\r\n  - _Prompt: Role: Frontend Developer with CSS expertise | Task: Copy and adapt IP card grid layout from PriceOverrides.vue to UserPriceOverrideModal following requirement 2.3, maintaining visual consistency | Restrictions: Must adapt styles for modal context, ensure mobile responsiveness, maintain flag images and card structure | Success: Cards display correctly in modal, layout matches PriceOverrides design, responsive on mobile devices_\r\n\r\n### Task 3.4: Implement loadUserIpPool function\r\n- [ ] 3.4 Implement loadUserIpPool function\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue` (script)\r\n  - Create `loadUserIpPool()` async function\r\n  - Call `admin.getUserIpPool(props.userId)` API\r\n  - Store response in `ipPoolData` reactive array\r\n  - Add loading state and error handling\r\n  - Purpose: Fetch user-specific IP pool with pricing data\r\n  - _Leverage: `frontend/src/api/modules/admin.ts` (API call already exists)_\r\n  - _Requirements: Requirement 2.3 (Load user IP pool)_\r\n  - _Prompt: Role: Frontend Developer with API integration expertise | Task: Implement loadUserIpPool function to fetch user-specific price data following requirement 2.3, using existing admin API module | Restrictions: Must handle loading states, catch and display errors, call API only when modal opens | Success: IP pool data loads correctly when modal opens, loading state displayed, errors handled gracefully with user-friendly messages_\r\n\r\n### Task 3.5: Implement price change tracking\r\n- [ ] 3.5 Implement price change tracking\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue` (script)\r\n  - Create `changes` reactive Map to track modifications: `Map<string, number | null>`\r\n  - Implement `handlePriceChange(item, newPrice)` function to update `changes`\r\n  - Implement `hasChange(item)` computed function to check if item has unsaved changes\r\n  - Create `hasChanges` computed property: `changes.size > 0`\r\n  - Purpose: Track user modifications before saving\r\n  - _Leverage: Same pattern as `PriceOverrides.vue` uses for tracking changes_\r\n  - _Requirements: Requirement 2.4 (Track price modifications)_\r\n  - _Prompt: Role: Frontend Developer with state management expertise | Task: Implement price change tracking system following requirement 2.4, using reactive Map and computed properties like PriceOverrides.vue pattern | Restrictions: Must track changes without modifying original data, enable save button only when changes exist, maintain change state until saved or discarded | Success: Changes tracked correctly in Map, UI reflects modified items visually, save button enabled only when changes present_\r\n\r\n### Task 3.6: Implement filters (IP type, continent, status, search)\r\n- [ ] 3.6 Implement filters (IP type, continent, status, search)\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue`\r\n  - Copy filter structure from `PriceOverrides.vue` (lines 46-89)\r\n  - Implement `filteredIpPool` computed property with filter logic\r\n  - Add filter state: `ipType`, `continent`, `status`, `search`\r\n  - Purpose: Allow admin to quickly find specific IP regions\r\n  - _Leverage: Filter implementation from `PriceOverrides.vue` lines 46-89_\r\n  - _Requirements: Non-Functional Requirement (Usability)_\r\n  - _Prompt: Role: Frontend Developer with filtering logic expertise | Task: Implement IP pool filtering system following PriceOverrides.vue pattern, creating filter UI and computed filtered list | Restrictions: Must match existing filter patterns, ensure performant filtering for large lists, maintain filter state on re-render | Success: All filters work correctly (IP type, continent, status, search), filtering is instant and performant, UI updates smoothly_\r\n\r\n### Task 3.7: Implement saveChanges function\r\n- [ ] 3.7 Implement saveChanges function\r\n  - File: `frontend/src/components/UserPriceOverrideModal.vue` (script)\r\n  - Create `saveChanges()` async function\r\n  - Convert `changes` Map to updates array: `[{ country, city, ipType, overridePrice }]`\r\n  - Call `admin.updateUserPriceOverrides(props.userId, { updates })`\r\n  - Emit `@saved` event on success, show success message\r\n  - Handle errors with error message, keep modal open\r\n  - Purpose: Save user-specific price overrides to backend\r\n  - _Leverage: `admin.updateUserPriceOverrides()` API call (already exists in backend)_\r\n  - _Requirements: Requirement 2.5 (Save price overrides)_\r\n  - _Prompt: Role: Frontend Developer with API integration expertise | Task: Implement saveChanges function to persist user price overrides following requirement 2.5, calling existing batch update API | Restrictions: Must validate changes before sending, handle API errors gracefully, clear changes map on success | Success: Changes save correctly to backend, success/error messages displayed, modal closes on success, errors keep modal open for retry_\r\n\r\n---\r\n\r\n## Phase 4: Frontend - Users.vue Integration\r\n\r\n### Task 4.1: Import UserPriceOverrideModal component\r\n- [ ] 4.1 Import UserPriceOverrideModal component\r\n  - File: `frontend/src/views/admin/Users.vue` (script)\r\n  - Import `UserPriceOverrideModal` component\r\n  - Add component state: `priceOverrideModalVisible`, `selectedUserId`, `selectedUserName`\r\n  - Purpose: Prepare Users.vue to use the price override modal\r\n  - _Leverage: Newly created `UserPriceOverrideModal.vue` component_\r\n  - _Requirements: Requirement 2.1 (Display price override button)_\r\n  - _Prompt: Role: Vue.js Developer | Task: Import UserPriceOverrideModal component into Users.vue and set up necessary state following requirement 2.1 | Restrictions: Must register component properly, initialize state with correct types, follow existing component import patterns | Success: Component imported correctly, state initialized, no TypeScript errors_\r\n\r\n### Task 4.2: Add \"价格覆盖\" button to users table actions\r\n- [ ] 4.2 Add \"价格覆盖\" button to users table actions\r\n  - File: `frontend/src/views/admin/Users.vue` (template)\r\n  - Add \"价格覆盖\" button to the actions column in users table\r\n  - Use `<el-button>` with `Money` icon from Element Plus icons\r\n  - Add click handler: `@click=\"openPriceOverrideModal(row)\"`\r\n  - Purpose: Provide UI trigger for opening price override modal\r\n  - _Leverage: Existing action buttons in Users table (Edit, Block, etc.)_\r\n  - _Requirements: Requirement 2.1 (Display price override button)_\r\n  - _Prompt: Role: Frontend Developer with Element Plus table expertise | Task: Add price override button to users table actions column following requirement 2.1, using existing action button patterns | Restrictions: Must maintain table layout, ensure button sizing consistent with other actions, use proper icon | Success: Button displays in table for all users, icon correct, click event triggers properly, layout not broken_\r\n\r\n### Task 4.3: Implement openPriceOverrideModal function\r\n- [ ] 4.3 Implement openPriceOverrideModal function\r\n  - File: `frontend/src/views/admin/Users.vue` (script)\r\n  - Create `openPriceOverrideModal(user)` function\r\n  - Set `selectedUserId` and `selectedUserName` from user object\r\n  - Set `priceOverrideModalVisible = true`\r\n  - Purpose: Handle modal opening with user context\r\n  - _Leverage: Similar patterns for opening modals in Users.vue (e.g., edit modal)_\r\n  - _Requirements: Requirement 2.2 (Open modal on button click)_\r\n  - _Prompt: Role: Frontend Developer | Task: Implement modal opening function following requirement 2.2, passing user context to modal | Restrictions: Must extract correct user data, handle missing data gracefully, follow existing modal opening patterns | Success: Modal opens with correct user ID and name, modal loads user data correctly, no errors if user data incomplete_\r\n\r\n### Task 4.4: Add UserPriceOverrideModal to template\r\n- [ ] 4.4 Add UserPriceOverrideModal to template\r\n  - File: `frontend/src/views/admin/Users.vue` (template)\r\n  - Add `<UserPriceOverrideModal>` component at end of template\r\n  - Bind props: `:user-id=\"selectedUserId\"`, `:user-name=\"selectedUserName\"`, `v-model:visible=\"priceOverrideModalVisible\"`\r\n  - Add `@saved` handler to refresh users table if needed\r\n  - Purpose: Integrate modal into Users page\r\n  - _Leverage: `UserPriceOverrideModal` component_\r\n  - _Requirements: Requirement 2 (Complete integration)_\r\n  - _Prompt: Role: Vue.js Developer | Task: Integrate UserPriceOverrideModal component into Users.vue template following requirement 2, binding all necessary props and events | Restrictions: Must bind all props correctly, handle saved event appropriately, maintain existing page structure | Success: Modal renders correctly, props passed properly, saved event triggers table refresh (if needed), no layout issues_\r\n\r\n---\r\n\r\n## Phase 5: Mobile Responsive Styles\r\n\r\n### Task 5.1: Apply responsive styles to Dashboard.vue\r\n- [ ] 5.1 Apply responsive styles to Dashboard.vue\r\n  - File: `frontend/src/views/dashboard/Index.vue` (style section)\r\n  - Add `@mixin mobile { @media (max-width: 768px) { @content; } }`\r\n  - Apply to `.statistics-cards`: single column layout on mobile\r\n  - Apply to `.chart-wrapper`: ensure charts resize correctly\r\n  - Reduce padding/margins for mobile\r\n  - Purpose: Make dashboard mobile-friendly\r\n  - _Leverage: Existing responsive patterns in codebase_\r\n  - _Requirements: Requirement 3 (Mobile Responsive Improvements)_\r\n  - _Prompt: Role: Frontend Developer with responsive design expertise | Task: Apply mobile responsive styles to Dashboard.vue following requirement 3, using media queries and responsive layout patterns | Restrictions: Must not break desktop layout, ensure charts remain readable, maintain visual hierarchy | Success: Dashboard displays correctly on mobile (tested at 375px width), statistics cards stack vertically, charts resize smoothly, all content accessible_\r\n\r\n### Task 5.2: Apply responsive styles to StaticBuy.vue\r\n- [ ] 5.2 Apply responsive styles to StaticBuy.vue\r\n  - File: `frontend/src/views/proxy/StaticBuy.vue` (style section)\r\n  - Stack form elements vertically on mobile\r\n  - Make IP selection cards single-column\r\n  - Enlarge touch targets to 44x44px minimum\r\n  - Make action buttons full-width on mobile\r\n  - Purpose: Optimize proxy purchase flow for mobile users\r\n  - _Leverage: Mobile mixin pattern_\r\n  - _Requirements: Requirement 3.2 (Mobile form optimization)_\r\n  - _Prompt: Role: Frontend Developer with mobile UX expertise | Task: Apply responsive styles to StaticBuy.vue following requirement 3.2, optimizing form layout and touch targets for mobile | Restrictions: Must maintain form functionality, ensure all inputs accessible, test on real mobile devices | Success: Form elements stack correctly on mobile, touch targets adequate for mobile use, purchase flow works smoothly on touchscreens_\r\n\r\n### Task 5.3: Apply responsive styles to StaticManage.vue\r\n- [ ] 5.3 Apply responsive styles to StaticManage.vue\r\n  - File: `frontend/src/views/proxy/StaticManage.vue` (style section)\r\n  - Make table horizontally scrollable on mobile: `overflow-x: auto`\r\n  - Hide non-essential columns with `.hidden-mobile` class\r\n  - Transform filter section to vertical stack\r\n  - Purpose: Make proxy management table usable on mobile\r\n  - _Leverage: Table responsive patterns_\r\n  - _Requirements: Requirement 3.2 (Mobile table optimization)_\r\n  - _Prompt: Role: Frontend Developer with table responsive design expertise | Task: Apply responsive styles to StaticManage.vue table following requirement 3.2, making table scrollable and hiding non-critical columns | Restrictions: Must keep essential columns visible, ensure horizontal scroll smooth, maintain row actions accessible | Success: Table scrolls horizontally on mobile, essential data visible, row actions work correctly, no layout overflow_\r\n\r\n### Task 5.4: Apply responsive styles to Users.vue (Admin)\r\n- [ ] 5.4 Apply responsive styles to Users.vue (Admin)\r\n  - File: `frontend/src/views/admin/Users.vue` (style section)\r\n  - Apply same table responsive patterns as StaticManage.vue\r\n  - Stack filter section vertically on mobile\r\n  - Ensure action buttons remain accessible\r\n  - Purpose: Make user management accessible on mobile\r\n  - _Leverage: Table responsive patterns from StaticManage.vue_\r\n  - _Requirements: Requirement 3.5 (Admin page mobile optimization)_\r\n  - _Prompt: Role: Frontend Developer | Task: Apply responsive styles to Users.vue admin page following requirement 3.5, using table patterns from StaticManage.vue | Restrictions: Must maintain admin functionality, ensure all actions accessible on mobile, test table scroll | Success: User table usable on mobile, filters work correctly, all admin actions (edit, block, price override) accessible_\r\n\r\n### Task 5.5: Apply responsive styles to RechargeApproval.vue (Admin)\r\n- [ ] 5.5 Apply responsive styles to RechargeApproval.vue (Admin)\r\n  - File: `frontend/src/views/admin/RechargeApproval.vue` (style section)\r\n  - Make recharge table horizontally scrollable\r\n  - Stack approval actions vertically on mobile\r\n  - Optimize filter section for mobile\r\n  - Purpose: Allow admins to approve recharges on mobile\r\n  - _Leverage: Table responsive patterns_\r\n  - _Requirements: Requirement 3.5 (Admin page mobile optimization)_\r\n  - _Prompt: Role: Frontend Developer | Task: Apply responsive styles to RechargeApproval.vue following requirement 3.5, optimizing table and approval actions for mobile | Restrictions: Must maintain approval workflow, ensure image preview works on mobile, test touch interactions | Success: Recharge table displays correctly, admins can approve/reject on mobile, receipt images viewable on mobile_\r\n\r\n### Task 5.6: Apply responsive styles to PriceOverrides.vue (Admin)\r\n- [ ] 5.6 Apply responsive styles to PriceOverrides.vue (Admin)\r\n  - File: `frontend/src/views/admin/PriceOverrides.vue` (style section)\r\n  - Transform card grid to single column on mobile: `grid-template-columns: 1fr`\r\n  - Stack filter section vertically\r\n  - Ensure input-number controls are touch-friendly\r\n  - Purpose: Allow admins to manage price overrides on mobile\r\n  - _Leverage: Card grid responsive patterns_\r\n  - _Requirements: Requirement 3.5 (Admin page mobile optimization)_\r\n  - _Prompt: Role: Frontend Developer with responsive grid expertise | Task: Apply responsive styles to PriceOverrides.vue card grid following requirement 3.5, transforming multi-column to single-column on mobile | Restrictions: Must maintain card styling, ensure touch-friendly inputs, test number input on mobile keyboards | Success: Cards display single-column on mobile, filters work correctly, price inputs easy to use on touchscreen_\r\n\r\n### Task 5.7: Apply responsive styles to Orders.vue (Admin)\r\n- [ ] 5.7 Apply responsive styles to Orders.vue (Admin)\r\n  - File: `frontend/src/views/admin/Orders.vue` (style section)\r\n  - Make orders table horizontally scrollable\r\n  - Hide non-critical columns on mobile (`.hidden-mobile`)\r\n  - Stack date filters vertically\r\n  - Purpose: Allow admins to view orders on mobile\r\n  - _Leverage: Table responsive patterns_\r\n  - _Requirements: Requirement 3.5 (Admin page mobile optimization)_\r\n  - _Prompt: Role: Frontend Developer | Task: Apply responsive styles to Orders.vue table following requirement 3.5, using consistent table responsive patterns | Restrictions: Must show order ID and status on mobile, hide less critical data, test horizontal scroll | Success: Orders table usable on mobile, key information visible, table scrolls smoothly, filters work correctly_\r\n\r\n---\r\n\r\n## Phase 6: Testing & Bug Fixes\r\n\r\n### Task 6.1: Manual testing of business scenario selector\r\n- [ ] 6.1 Manual testing of business scenario selector\r\n  - Test: Navigate to Static Proxy Purchase page\r\n  - Test: Select different business scenarios (TikTok, Instagram, etc.)\r\n  - Test: Verify inventory filters correctly\r\n  - Test: Verify \"All Scenarios\" resets filter\r\n  - Test: Verify purchase completes with scenario tag\r\n  - Purpose: Validate business scenario feature works end-to-end\r\n  - _Requirements: Requirement 1 (Business Scenario Selector)_\r\n  - _Prompt: Role: QA Tester | Task: Perform comprehensive manual testing of business scenario selector following requirement 1 test scenarios | Restrictions: Must test all scenarios, verify API responses, check error handling | Success: All scenarios filter correctly, purchase flow completes successfully, no console errors, API calls correct_\r\n\r\n### Task 6.2: Manual testing of user price override modal\r\n- [ ] 6.2 Manual testing of user price override modal\r\n  - Test: Open Users page as admin\r\n  - Test: Click \"价格覆盖\" button for a user\r\n  - Test: Modal opens with user's current prices\r\n  - Test: Modify prices for multiple regions\r\n  - Test: Save changes successfully\r\n  - Test: User sees custom pricing when logged in\r\n  - Purpose: Validate user price override feature works end-to-end\r\n  - _Requirements: Requirement 2 (User-Level Price Override)_\r\n  - _Prompt: Role: QA Tester | Task: Perform comprehensive manual testing of user price override modal following requirement 2 test scenarios | Restrictions: Must test save/cancel flows, verify database persistence, test multiple users | Success: Modal opens correctly, prices save successfully, user sees custom pricing, admin can clear overrides_\r\n\r\n### Task 6.3: Mobile device testing (iOS)\r\n- [ ] 6.3 Mobile device testing (iOS)\r\n  - Test: Access platform on iPhone Safari (real device or simulator)\r\n  - Test: Navigate through all pages (Dashboard, StaticBuy, StaticManage, Users, etc.)\r\n  - Test: Verify touch interactions work correctly\r\n  - Test: Check for layout issues or overflow\r\n  - Test: Test form inputs with iOS keyboard\r\n  - Purpose: Ensure iOS compatibility and usability\r\n  - _Requirements: Requirement 3 (Mobile Responsive)_\r\n  - _Prompt: Role: Mobile QA Tester with iOS expertise | Task: Perform comprehensive mobile testing on iOS Safari following requirement 3 mobile test scenarios | Restrictions: Must test on real device if possible, check all touch interactions, verify keyboard behavior | Success: All pages display correctly on iOS, no layout issues, touch interactions smooth, forms submit correctly_\r\n\r\n### Task 6.4: Mobile device testing (Android)\r\n- [ ] 6.4 Mobile device testing (Android)\r\n  - Test: Access platform on Android Chrome (real device or emulator)\r\n  - Test: Navigate through all pages\r\n  - Test: Verify responsive layouts\r\n  - Test: Test forms with Android keyboard\r\n  - Purpose: Ensure Android compatibility\r\n  - _Requirements: Requirement 3 (Mobile Responsive)_\r\n  - _Prompt: Role: Mobile QA Tester with Android expertise | Task: Perform comprehensive mobile testing on Android Chrome following requirement 3 mobile test scenarios | Restrictions: Must test on real device if possible, verify keyboard and input behavior, check performance | Success: All pages work on Android, responsive layouts correct, no performance issues, forms work correctly_\r\n\r\n### Task 6.5: Cross-browser testing (Chrome, Firefox, Safari, Edge)\r\n- [ ] 6.5 Cross-browser testing (Chrome, Firefox, Safari, Edge)\r\n  - Test: Open platform in Chrome, Firefox, Safari, Edge\r\n  - Test: Verify all three features work in each browser\r\n  - Test: Check for CSS rendering differences\r\n  - Test: Verify API calls work correctly\r\n  - Purpose: Ensure cross-browser compatibility\r\n  - _Requirements: All Requirements_\r\n  - _Prompt: Role: QA Tester with cross-browser testing expertise | Task: Perform cross-browser compatibility testing covering all features across Chrome, Firefox, Safari, and Edge | Restrictions: Must test desktop versions, check for CSS bugs, verify JavaScript compatibility | Success: All features work in all browsers, no visual regressions, API calls successful, no console errors_\r\n\r\n### Task 6.6: Bug fixes and polish\r\n- [ ] 6.6 Bug fixes and polish\r\n  - Fix any bugs discovered during testing\r\n  - Polish UI/UX based on feedback\r\n  - Optimize performance if needed\r\n  - Address any accessibility issues\r\n  - Purpose: Ensure production-ready quality\r\n  - _Requirements: All Requirements_\r\n  - _Prompt: Role: Senior Developer | Task: Review and fix all bugs discovered during testing, polish UI/UX, and optimize performance to meet production quality standards | Restrictions: Must not introduce new bugs, maintain code quality, test all fixes thoroughly | Success: All bugs fixed and verified, UI polished, performance acceptable, no accessibility issues_\r\n\r\n---\r\n\r\n## Phase 7: Documentation & Deployment\r\n\r\n### Task 7.1: Update API documentation\r\n- [ ] 7.1 Update API documentation\r\n  - Document: `GET /api/v1/proxy985/business-list` endpoint\r\n  - Document: User price override workflow\r\n  - Update Postman collection or OpenAPI spec\r\n  - Purpose: Keep API documentation current\r\n  - _Requirements: All Backend Requirements_\r\n  - _Prompt: Role: Technical Writer with API documentation expertise | Task: Document new API endpoints and workflows, updating OpenAPI spec or Postman collection | Restrictions: Must document request/response formats, include examples, maintain documentation standards | Success: API documentation complete and accurate, examples provided, easy to understand for developers_\r\n\r\n### Task 7.2: Update user guide for admins\r\n- [ ] 7.2 Update user guide for admins\r\n  - Document: How to set user-specific price overrides\r\n  - Add screenshots of modal interface\r\n  - Explain pricing priority logic\r\n  - Purpose: Help admins use new feature\r\n  - _Requirements: Requirement 2 (User-Level Price Override)_\r\n  - _Prompt: Role: Technical Writer | Task: Create user guide documentation for admin user price override feature with screenshots and step-by-step instructions | Restrictions: Must be clear for non-technical users, include visual aids, explain all options | Success: Admin guide complete with screenshots, step-by-step instructions clear, pricing logic explained_\r\n\r\n### Task 7.3: Create deployment checklist\r\n- [ ] 7.3 Create deployment checklist\r\n  - Checklist: Run database migration\r\n  - Checklist: Update environment variables if needed\r\n  - Checklist: Build frontend with `npm run build`\r\n  - Checklist: Restart backend service\r\n  - Checklist: Clear CDN cache\r\n  - Checklist: Smoke test in production\r\n  - Purpose: Ensure smooth deployment\r\n  - _Requirements: All Requirements_\r\n  - _Prompt: Role: DevOps Engineer | Task: Create comprehensive deployment checklist covering database migration, environment setup, build, and deployment verification | Restrictions: Must include rollback steps, verify all dependencies, test critical paths post-deployment | Success: Checklist complete and tested, deployment succeeds without issues, all features work in production_\r\n\r\n### Task 7.4: Deploy to staging environment\r\n- [ ] 7.4 Deploy to staging environment\r\n  - Run database migration on staging DB\r\n  - Deploy backend and frontend code\r\n  - Verify all features work in staging\r\n  - Perform UAT (User Acceptance Testing)\r\n  - Purpose: Validate deployment before production\r\n  - _Requirements: All Requirements_\r\n  - _Prompt: Role: DevOps Engineer with deployment automation expertise | Task: Deploy all changes to staging environment and perform comprehensive validation before production deployment | Restrictions: Must follow deployment checklist, verify database migration, test all features thoroughly | Success: Staging deployment successful, all features work correctly, UAT completed, no blocking issues found_\r\n\r\n### Task 7.5: Deploy to production\r\n- [ ] 7.5 Deploy to production\r\n  - Schedule deployment window (communicate to users if needed)\r\n  - Run production database migration\r\n  - Deploy backend and frontend to production\r\n  - Monitor for errors in first 24 hours\r\n  - Purpose: Release features to production users\r\n  - _Requirements: All Requirements_\r\n  - _Prompt: Role: DevOps Engineer | Task: Execute production deployment following staging success, with proper monitoring and rollback plan ready | Restrictions: Must have rollback plan ready, monitor error rates closely, communicate with team during deployment | Success: Production deployment successful, no critical errors, monitoring confirms stable operation, features available to users_\r\n\r\n---\r\n\r\n## Summary\r\n\r\n**Total Tasks:** 54 tasks across 7 phases\r\n\r\n**Estimated Time:**\r\n- Phase 1 (Backend): 4-6 hours\r\n- Phase 2 (Business Scenario): 3-4 hours\r\n- Phase 3 (User Price Override Modal): 6-8 hours\r\n- Phase 4 (Users.vue Integration): 2-3 hours\r\n- Phase 5 (Mobile Responsive): 8-10 hours\r\n- Phase 6 (Testing & Bug Fixes): 6-8 hours\r\n- Phase 7 (Documentation & Deployment): 3-4 hours\r\n\r\n**Total Estimated Time:** 32-43 hours\r\n\r\n**Priority:**\r\n1. **High Priority**: Phases 1-4 (Core features)\r\n2. **Medium Priority**: Phase 5 (Mobile responsive)\r\n3. **Low Priority but Essential**: Phases 6-7 (Testing and deployment)\r\n\r\n**Dependencies:**\r\n- Phase 2 depends on Phase 1 (Task 1.2 - business list endpoint)\r\n- Phase 3 depends on Phase 1 (Task 1.3, 1.4 - user override API)\r\n- Phase 4 depends on Phase 3 (UserPriceOverrideModal component)\r\n- Phase 6 depends on all previous phases being complete\r\n- Phase 7 depends on Phase 6 (testing) being complete\r\n\r\n",
  "fileStats": {
    "size": 36905,
    "lines": 475,
    "lastModified": "2025-11-10T03:46:33.541Z"
  },
  "comments": []
}