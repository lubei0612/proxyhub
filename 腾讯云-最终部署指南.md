# ğŸš€ ProxyHub è…¾è®¯äº‘æœ€ç»ˆéƒ¨ç½²æŒ‡å—

## âœ¨ æ–°æ–¹æ¡ˆç‰¹ç‚¹

âœ… **å…¨è‡ªåŠ¨åˆå§‹åŒ–**ï¼šå®¹å™¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨å’Œåˆå§‹æ•°æ®
âœ… **é›¶æ‰‹åŠ¨æ“ä½œ**ï¼šæ— éœ€æ‰‹åŠ¨è¿è¡Œåˆå§‹åŒ–è„šæœ¬
âœ… **ç”Ÿäº§ç¯å¢ƒéªŒè¯**ï¼šåªä½¿ç”¨ production dependenciesï¼Œç¡®ä¿ç¨³å®šæ€§
âœ… **æ™ºèƒ½ç­‰å¾…**ï¼šè‡ªåŠ¨ç­‰å¾…æ•°æ®åº“å°±ç»ªåå†åˆå§‹åŒ–
âœ… **å¹‚ç­‰æ€§**ï¼šå¤šæ¬¡è¿è¡Œå®‰å…¨ï¼Œä¸ä¼šé‡å¤åˆ›å»ºæ•°æ®

---

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1ï¼šæ¸…ç†æ—§éƒ¨ç½²

åœ¨**è…¾è®¯äº‘ SSH**æ‰§è¡Œï¼š

```bash
cd /opt/proxyhub

# åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨å’Œé•œåƒ
docker compose -f docker-compose.cn.yml down
docker rmi proxyhub-backend proxyhub-frontend
```

### æ­¥éª¤ 2ï¼šæ›´æ–°ä»£ç 

```bash
# åˆ é™¤æ—§æ–‡ä»¶
rm -rf backend frontend docker-compose.cn.yml *.sh

# é‡æ–°ä¸‹è½½æœ€æ–°ä»£ç åŒ…
curl -L -o proxyhub-deploy.tar.gz \
  "https://github.com/lubei0612/proxyhub/archive/refs/heads/master.tar.gz"

# è§£å‹
tar -xzf proxyhub-deploy.tar.gz --strip-components=1

# æŸ¥çœ‹å…³é”®æ–‡ä»¶
ls -la backend/init-db.js backend/docker-entrypoint.sh backend/Dockerfile.cn
```

### æ­¥éª¤ 3ï¼šæ„å»ºå¹¶å¯åŠ¨

```bash
# æ„å»ºæ–°é•œåƒï¼ˆåŒ…å«è‡ªåŠ¨åˆå§‹åŒ–ï¼‰
docker compose -f docker-compose.cn.yml build --no-cache

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose -f docker-compose.cn.yml up -d

# æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—ï¼ˆä¼šçœ‹åˆ°è‡ªåŠ¨åˆå§‹åŒ–è¿‡ç¨‹ï¼‰
docker logs -f proxyhub-backend
```

---

## ğŸ“Š é¢„æœŸæ—¥å¿—è¾“å‡º

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨ä¼šåœ¨åç«¯æ—¥å¿—ä¸­çœ‹åˆ°ï¼š

```
=========================================
ğŸš€ ProxyHub Backend å¯åŠ¨ä¸­...
=========================================
â³ ç­‰å¾…æ•°æ®åº“å°±ç»ª...
âœ… æ•°æ®åº“å·²å°±ç»ª

ğŸ“Š åˆå§‹åŒ–æ•°æ®åº“...

=========================================
ğŸš€ ProxyHub æ•°æ®åº“åˆå§‹åŒ–
=========================================

ğŸ“¡ æ­£åœ¨è¿æ¥æ•°æ®åº“...
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ

ğŸ“‹ æ­£åœ¨åˆ›å»ºåˆå§‹æ•°æ®...

âœ… ç®¡ç†å‘˜è´¦å·: admin@example.com / admin123 (ä½™é¢: $10,000)
âœ… æµ‹è¯•ç”¨æˆ·: user@example.com / password123 (ä½™é¢: $1,000)
âœ… æµ‹è¯•ç”¨æˆ·: alice@test.com / password123 (ä½™é¢: $500)
âœ… æµ‹è¯•ç”¨æˆ·: bob@test.com / password123 (ä½™é¢: $500)
âœ… ä»·æ ¼é…ç½®: åŠ¨æ€ä½å®…ä»£ç† - $7.00/GB
âœ… ä»·æ ¼é…ç½®: é™æ€ä½å®…IPï¼ˆæ™®é€šï¼‰ - $5.00/IP/æœˆ
âœ… ä»·æ ¼é…ç½®: é™æ€ä½å®…IPï¼ˆåŸç”Ÿï¼‰ - $8.00/IP/æœˆ
âœ… æ±‡ç‡é…ç½®: 1 USD = 7.20 CNY
âœ… ç³»ç»Ÿè®¾ç½®: 5 é¡¹é…ç½®å·²åˆ›å»º

=========================================
ğŸ‰ æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
=========================================

ğŸ“‹ ç™»å½•å‡­è¯ï¼š

ç®¡ç†å‘˜: admin@example.com / admin123 ($10,000)
æµ‹è¯•ç”¨æˆ·:
  â€¢ user@example.com / password123 ($1,000)
  â€¢ alice@test.com / password123 ($500)
  â€¢ bob@test.com / password123 ($500)

=========================================

âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ

ğŸ¯ å¯åŠ¨ NestJS åº”ç”¨...
[Nest] 1  - LOG [NestApplication] Nest application successfully started

========================================
  ProxyHub Backend Started!
========================================
  API Server: http://localhost:3000/api/v1
  API Docs:   http://localhost:3000/api
  Environment: production
========================================
```

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥å®¹å™¨çŠ¶æ€

```bash
docker compose -f docker-compose.cn.yml ps
```

**é¢„æœŸè¾“å‡º**ï¼šæ‰€æœ‰å®¹å™¨çŠ¶æ€ä¸º `Up` ä¸” `healthy`

### 2. è®¿é—®å‰ç«¯

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://43.130.35.117`

### 3. æµ‹è¯•ç™»å½•

ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼š
- é‚®ç®±ï¼š`admin@example.com`
- å¯†ç ï¼š`admin123`

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šåç«¯å®¹å™¨ä¸€ç›´é‡å¯

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker logs proxyhub-backend --tail 100

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
docker exec proxyhub-backend nc -zv postgres 5432
```

### é—®é¢˜ 2ï¼šå‰ç«¯æ˜¾ç¤º unhealthy

```bash
# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
docker logs proxyhub-frontend

# æ£€æŸ¥å‰ç«¯å¥åº·æ£€æŸ¥
docker exec proxyhub-frontend curl -f http://localhost || echo "Health check failed"
```

### é—®é¢˜ 3ï¼šåˆå§‹åŒ–å¤±è´¥ä½†åº”ç”¨ç»§ç»­å¯åŠ¨

è¿™æ˜¯**æ­£å¸¸è¡Œä¸º**ï¼å¦‚æœæ•°æ®å·²å­˜åœ¨ï¼Œåˆå§‹åŒ–ä¼šè·³è¿‡ã€‚æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ˜¯å¦æœ‰ "å·²å­˜åœ¨" çš„æç¤ºã€‚

---

## ğŸ“¦ æŠ€æœ¯å®ç°

### å·¥ä½œæµç¨‹

1. **å®¹å™¨å¯åŠ¨** â†’ è¿è¡Œ `docker-entrypoint.sh`
2. **ç­‰å¾…æ•°æ®åº“** â†’ æœ€å¤šç­‰å¾… 60 ç§’
3. **è¿è¡Œåˆå§‹åŒ–** â†’ `node init-db.js`
   - ä½¿ç”¨ `synchronize: true` è‡ªåŠ¨åˆ›å»ºè¡¨
   - åˆ›å»ºç®¡ç†å‘˜ã€æµ‹è¯•ç”¨æˆ·ã€ä»·æ ¼é…ç½®ç­‰
   - å¹‚ç­‰æ€§è®¾è®¡ï¼šå·²å­˜åœ¨çš„æ•°æ®ä¸ä¼šé‡å¤åˆ›å»º
4. **å¯åŠ¨åº”ç”¨** â†’ `node dist/src/main`

### å…³é”®æ–‡ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `backend/init-db.js` | æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ |
| `backend/docker-entrypoint.sh` | å®¹å™¨å¯åŠ¨å…¥å£è„šæœ¬ |
| `backend/Dockerfile.cn` | åç«¯é•œåƒæ„å»ºæ–‡ä»¶ï¼ˆåŒ…å«åˆå§‹åŒ–è„šæœ¬ï¼‰|

---

## ğŸ¯ ä¸‹ä¸€æ­¥

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å¯ä»¥ï¼š

1. âœ… ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•åå°
2. âœ… åœ¨ã€Œä»·æ ¼è¦†ç›–ç®¡ç†ã€ä¸­è°ƒæ•´ä»·æ ¼
3. âœ… åœ¨ã€Œç”¨æˆ·ç®¡ç†ã€ä¸­ç®¡ç†ç”¨æˆ·
4. âœ… ä½¿ç”¨æµ‹è¯•è´¦å·æµ‹è¯•è´­ä¹°æµç¨‹

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
# å®¹å™¨çŠ¶æ€
docker compose -f docker-compose.cn.yml ps

# åç«¯æ—¥å¿—
docker logs proxyhub-backend --tail 100

# å‰ç«¯æ—¥å¿—
docker logs proxyhub-frontend --tail 50

# æ•°æ®åº“æ—¥å¿—
docker logs proxyhub-postgres --tail 50
```

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰**

