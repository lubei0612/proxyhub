# 数据一致性问题修复清单

## 🔴 严重问题（P0 - 立即修复）

### 1. 流量统计数据使用随机数生成
**位置**: `backend/src/modules/dashboard/dashboard.service.ts`

**问题**:
- `getTrafficTrend()` 使用 `Math.random()` 生成流量趋势数据
- `getTrafficByType()` 使用估算值而非真实数据
- `getRequestDistribution()` 使用模拟数据

**影响**: 用户没有使用流量但显示有数据，严重误导用户

**修复方案**:
1. 如果没有真实流量记录表，应该返回全0或空数据
2. 添加明确标记说明这是估算数据
3. 或者创建真实的流量记录表

**代码位置**:
- Line 202-216: 使用 `Math.random()` 生成随机数据
- Line 122-126: 使用假设的baseUsage估算
- Line 154-162: 基于代理数量生成模拟请求分布

---

### 2. 仪表盘统计数据疑似不准确
**前端显示**:
- 总代理数：20
- 活跃代理：20
- 总订单数：31
- 总消费：$100.00

**需要验证**:
- 后端API逻辑正确（`DashboardService.getUserOverview()`）
- 数据库中实际数据是否匹配
- 前端是否正确调用API

---

### 3. 管理后台统计数据异常
**前端显示**:
- 总用户数：7
- 总收入：$500
- 总订单数：38
- 代理IP总数：30
- 普通用户：680（用户反馈）

**需要验证**:
- 检查`AdminService.getStatistics()`
- 验证数据库查询是否正确
- 检查前端显示逻辑

---

## 🟡 重要问题（P1 - 尽快修复）

### 4. 事件日志筛选功能未生效
**问题**: 用户点击事件类型筛选没有反应

**需要检查**:
- 前端筛选组件事件绑定
- 后端API是否支持筛选参数
- 筛选逻辑是否正确实现

---

### 5. 静态IP列表路由问题
**问题**: 导航到 `/proxy/static-manage` 但没有加载正确页面

**需要检查**:
- Vue Router配置
- 组件路径是否正确
- 是否需要登录状态

---

## 🟢 普通问题（P2 - 后续修复）

### 6. 数据一致性验证
需要验证以下模块数据一致性：
- 订单管理
- 交易明细
- 结算记录
- 充值订单

### 7. 用户管理功能检查
检查所有用户管理功能是否正常

### 8. 价格覆盖管理IP池来源
验证IP池是否来自985proxy

---

## 修复进度

- [ ] 问题1: 流量统计数据随机生成
- [ ] 问题2: 仪表盘统计数据验证
- [ ] 问题3: 管理后台统计数据验证
- [ ] 问题4: 事件日志筛选修复
- [ ] 问题5: 静态IP列表路由修复
- [ ] 问题6: 数据一致性验证
- [ ] 问题7: 用户管理功能检查
- [ ] 问题8: 价格覆盖管理验证

---

## 测试计划

使用Chrome DevTools MCP测试：
1. 用户仪表盘数据准确性
2. 管理后台统计数据准确性
3. 事件日志筛选功能
4. 静态IP列表显示
5. 各模块数据一致性

