# âš ï¸ Dockerç½‘ç»œé—®é¢˜ - å®Œæ•´è§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜è¯Šæ–­

æ‚¨é‡åˆ°çš„é”™è¯¯ï¼š
```
dial tcp 157.240.17.36:443: connectex: A connection attempt failed
```

**åŸå› **ï¼šDockeræ— æ³•è¿æ¥åˆ°Docker Hubä¸‹è½½é•œåƒï¼ˆç½‘ç»œè¿æ¥é—®é¢˜ï¼‰

---

## ğŸš€ è§£å†³æ–¹æ¡ˆ1ï¼šé…ç½®Dockeré•œåƒåŠ é€Ÿå™¨ï¼ˆæ¨èï¼‰â­

### æ­¥éª¤1ï¼šé…ç½®Docker

1. **å³é”®ç‚¹å‡»æ¡Œé¢Dockerå›¾æ ‡**
2. é€‰æ‹© **Settings**ï¼ˆè®¾ç½®ï¼‰
3. é€‰æ‹© **Docker Engine**
4. åœ¨JSONé…ç½®ä¸­æ‰¾åˆ° `registry-mirrors`ï¼Œæ·»åŠ å›½å†…é•œåƒï¼š

```json
{
  "registry-mirrors": [
    "https://docker.1ms.run",
    "https://docker.anyhub.us.kg",
    "https://dockerhub.icu"
  ]
}
```

5. ç‚¹å‡» **Apply & Restart**
6. ç­‰å¾…Dockeré‡å¯ï¼ˆçº¦30ç§’ï¼‰

### æ­¥éª¤2ï¼šé‡æ–°æ„å»º

é…ç½®å®Œæˆåï¼Œè¿è¡Œï¼š
```bash
.\å¿«é€Ÿä¿®å¤-é‡æ–°æ„å»º.bat
```

---

## ğŸš€ è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆæ›´å¿«ï¼‰â­â­â­

**ä¸ä½¿ç”¨Dockerï¼Œç›´æ¥æœ¬åœ°è¿è¡Œï¼Œé€Ÿåº¦æ›´å¿«ï¼**

### å‰ææ¡ä»¶
- Node.js 18+ å·²å®‰è£…
- PostgreSQL 15+ å·²å®‰è£…ï¼ˆæˆ–ä½¿ç”¨Dockeråªå¯åŠ¨æ•°æ®åº“ï¼‰

### æ­¥éª¤1ï¼šå¯åŠ¨æ•°æ®åº“ï¼ˆä½¿ç”¨Dockerï¼‰

```bash
# åªå¯åŠ¨PostgreSQLå’ŒRedis
docker-compose up postgres redis -d
```

### æ­¥éª¤2ï¼šå¯åŠ¨åç«¯

```powershell
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»º.envæ–‡ä»¶
copy .env.example .env

# åˆå§‹åŒ–æ•°æ®åº“
npm run seed

# å¯åŠ¨åç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm run start:dev
```

### æ­¥éª¤3ï¼šå¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰

```powershell
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å‰ç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm run dev
```

### æ­¥éª¤4ï¼šè®¿é—®åº”ç”¨

- **å‰ç«¯**ï¼šhttp://localhost:5173
- **åç«¯API**ï¼šhttp://localhost:3000/api/v1
- **APIæ–‡æ¡£**ï¼šhttp://localhost:3000/api/v1/docs

**æµ‹è¯•è´¦å·**ï¼š
- ç”¨æˆ·ï¼šuser@example.com / password123
- ç®¡ç†å‘˜ï¼šadmin@example.com / admin123

---

## ğŸš€ è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨å·²æ„å»ºçš„é•œåƒ

å¦‚æœæ‚¨æœ‰å¤‡ç”¨æœåŠ¡å™¨æˆ–VPNï¼Œå¯ä»¥ï¼š

1. åœ¨æœ‰è‰¯å¥½ç½‘ç»œçš„ç¯å¢ƒæ„å»ºé•œåƒ
2. å¯¼å‡ºé•œåƒï¼š
```bash
docker save proxyhub-backend:latest -o proxyhub-backend.tar
docker save proxyhub-frontend:latest -o proxyhub-frontend.tar
```

3. åœ¨æœ¬åœ°å¯¼å…¥ï¼š
```bash
docker load -i proxyhub-backend.tar
docker load -i proxyhub-frontend.tar
```

---

## ğŸ“Š ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| æ–¹æ¡ˆ1ï¼šDockeré•œåƒåŠ é€Ÿå™¨ | é…ç½®ä¸€æ¬¡æ°¸ä¹…ç”Ÿæ•ˆ | éœ€è¦é…ç½®Docker | â­â­â­â­ |
| æ–¹æ¡ˆ2ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ | å¯åŠ¨å¿«ã€è°ƒè¯•æ–¹ä¾¿ | éœ€è¦æ‰‹åŠ¨ç®¡ç†æœåŠ¡ | â­â­â­â­â­ |
| æ–¹æ¡ˆ3ï¼šé•œåƒå¯¼å…¥ | ä¸ä¾èµ–ç½‘ç»œ | éœ€è¦å…¶ä»–ç¯å¢ƒæ”¯æŒ | â­â­ |

---

## ğŸ’¡ æ¨èæ–¹æ¡ˆ

**æˆ‘å¼ºçƒˆæ¨èä½¿ç”¨æ–¹æ¡ˆ2ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ**

åŸå› ï¼š
1. âœ… **å¯åŠ¨é€Ÿåº¦å¿«** - ä¸éœ€è¦Dockeræ„å»ºï¼Œç›´æ¥å¯åŠ¨
2. âœ… **çƒ­é‡è½½** - ä»£ç ä¿®æ”¹åè‡ªåŠ¨åˆ·æ–°
3. âœ… **è°ƒè¯•æ–¹ä¾¿** - å¯ä»¥ç›´æ¥åœ¨IDEä¸­è°ƒè¯•
4. âœ… **èµ„æºå ç”¨å°‘** - ä¸éœ€è¦è¿è¡Œå®Œæ•´çš„Dockerå®¹å™¨
5. âœ… **ä¸å—ç½‘ç»œé™åˆ¶** - å·²ç»ä¸‹è½½äº†æ‰€æœ‰ä¾èµ–

### è¯¦ç»†æ­¥éª¤ï¼ˆæ–¹æ¡ˆ2ï¼‰

#### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æ•°æ®åº“

```bash
# åªå¯åŠ¨PostgreSQLå’ŒRedisï¼ˆçº¦10ç§’ï¼‰
docker-compose up postgres redis -d

# æ£€æŸ¥çŠ¶æ€
docker-compose ps
```

åº”è¯¥çœ‹åˆ°ï¼š
```
proxyhub-postgres    Up (healthy)
proxyhub-redis       Up (healthy)
```

#### ç¬¬äºŒæ­¥ï¼šé…ç½®åç«¯

```powershell
# è¿›å…¥åç«¯ç›®å½•
cd D:\Users\Desktop\proxyhub\backend

# æ£€æŸ¥.envæ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰
if (!(Test-Path .env)) { Copy-Item docs\ENV_TEMPLATE.txt .env }

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install

# åˆå§‹åŒ–æµ‹è¯•æ•°æ®
npm run seed

# å¯é€‰ï¼šè¿è¡Œæ‰©å±•æµ‹è¯•æ•°æ®
npm run seed:extended
```

#### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨åç«¯

```powershell
# åœ¨backendç›®å½•è¿è¡Œ
npm run start:dev
```

ç­‰å¾…çœ‹åˆ°ï¼š
```
[Nest] Application successfully started
[Nest] Listening on port 3000
```

#### ç¬¬å››æ­¥ï¼šå¯åŠ¨å‰ç«¯ï¼ˆæ–°PowerShellçª—å£ï¼‰

```powershell
# è¿›å…¥å‰ç«¯ç›®å½•
cd D:\Users\Desktop\proxyhub\frontend

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

ç­‰å¾…çœ‹åˆ°ï¼š
```
VITE v5.x.x  ready in xxx ms

âœ  Local:   http://localhost:5173/
âœ  Network: use --host to expose
```

#### ç¬¬äº”æ­¥ï¼šè®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:5173**

ç™»å½•è´¦å·ï¼š
- **ç”¨æˆ·**ï¼šuser@example.com / password123
- **ç®¡ç†å‘˜**ï¼šadmin@example.com / admin123

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨

**åç«¯ç«¯å£3000è¢«å ç”¨**ï¼š
```powershell
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :3000

# ç»“æŸè¿›ç¨‹ï¼ˆæ›¿æ¢<PID>ä¸ºå®é™…è¿›ç¨‹IDï¼‰
taskkill /F /PID <PID>
```

**å‰ç«¯ç«¯å£5173è¢«å ç”¨**ï¼š
Viteä¼šè‡ªåŠ¨å°è¯•ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£ï¼ˆ5174, 5175...ï¼‰

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥PostgreSQLæ˜¯å¦è¿è¡Œï¼š
```bash
docker-compose ps postgres
```

å¦‚æœçŠ¶æ€ä¸æ˜¯ `Up (healthy)`ï¼Œé‡å¯ï¼š
```bash
docker-compose restart postgres
```

### Q3: npm install å¤±è´¥

ä½¿ç”¨å›½å†…é•œåƒï¼š
```bash
npm config set registry https://registry.npmmirror.com
npm install
```

### Q4: å‰ç«¯ç™½å±

1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
2. å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ˜¯å¦æœ‰é”™è¯¯

---

## âœ… éªŒæ”¶æµ‹è¯•

ä½¿ç”¨æœ¬åœ°ç¯å¢ƒå¯åŠ¨åï¼Œæµ‹è¯•ï¼š

- [ ] ç™»å½•åŠŸèƒ½
- [ ] è¯­è¨€åˆ‡æ¢ï¼ˆå³ä¸Šè§’åœ°çƒå›¾æ ‡ï¼‰
- [ ] ä»ªè¡¨ç›˜å›¾è¡¨
- [ ] é™æ€IPé€‰è´­
- [ ] é™æ€IPç®¡ç†
- [ ] é’±åŒ…å……å€¼
- [ ] ç®¡ç†åå°ï¼ˆadmin@example.comï¼‰

---

## ğŸ¯ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

æœ¬åœ°æµ‹è¯•é€šè¿‡åï¼Œéƒ¨ç½²åˆ°è…¾è®¯äº‘æ—¶ï¼š
1. åœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šé…ç½®Dockeré•œåƒåŠ é€Ÿå™¨ï¼ˆæ–¹æ¡ˆ1ï¼‰
2. æˆ–ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨æœ¬åœ°ç¯å¢ƒè¿è¡Œï¼ˆæ–¹æ¡ˆ2 + PM2è¿›ç¨‹ç®¡ç†ï¼‰

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. Dockerç‰ˆæœ¬ï¼š`docker --version`
2. Node.jsç‰ˆæœ¬ï¼š`node --version`
3. é”™è¯¯æˆªå›¾æˆ–æ—¥å¿—

---

**æ¨èç«‹å³ä½¿ç”¨æ–¹æ¡ˆ2ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒï¼** ğŸš€

