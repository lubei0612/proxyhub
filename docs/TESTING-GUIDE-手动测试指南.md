# 🧪 ProxyHub 手动测试指南

**日期**: 2025-11-09  
**版本**: v1.0.0  
**环境**: 本地开发环境 (Docker)

---

## 📍 访问地址

### 前端地址
```
http://localhost
或
http://localhost:80
```

### 后端API地址
```
http://localhost:3000/api/v1
```

### API文档 (Swagger)
```
http://localhost:3000/api
```

---

## 👤 测试账号

### 管理员账号
```
邮箱: admin@example.com
密码: Admin123456!
角色: admin
```

### 普通用户账号（如需要）
您可以通过注册页面创建新用户，或通过管理后台添加。

---

## 🎯 核心功能测试清单

### ✅ 阶段1: 基础功能测试（必测）

#### 1.1 登录/注册
- [ ] **访问前端**: 打开 `http://localhost`
- [ ] **登录功能**: 使用管理员账号登录
  - 邮箱: `admin@example.com`
  - 密码: `Admin123456!`
- [ ] **验证登录**: 成功后应跳转到仪表盘
- [ ] **退出登录**: 点击右上角退出

#### 1.2 仪表盘
- [ ] **访问仪表盘**: 登录后查看首页
- [ ] **数据展示**: 
  - 账户余额显示
  - IP总数统计
  - 流量使用统计
  - 消费趋势图表
  - 流量类型分布图
- [ ] **💰 收入趋势图表** (新功能 - Task 6)
  - 应显示真实的充值数据
  - 不再是硬编码的演示数据
  - 可以切换时间范围（7天、30天等）

---

### ✅ 阶段2: 静态代理功能测试

#### 2.1 静态住宅管理
- [ ] **访问页面**: 侧边栏 -> 静态住宅 -> 静态住宅管理
- [ ] **查看IP列表**: 
  - 表格显示所有静态IP
  - 显示IP地址、国家、城市、状态、到期时间
- [ ] **筛选功能**:
  - [ ] **国家筛选** (新功能 - Task 5)
    - 下拉列表显示"所有国家"选项
    - 从985Proxy API动态加载国家列表
    - 选择国家后自动更新城市列表
  - [ ] **城市筛选** (新功能 - Task 5)
    - 下拉列表显示"所有城市"选项
    - 根据选择的国家动态加载城市
  - [ ] **状态筛选**: Active/Expired
- [ ] **IP续费功能** (优化 - Task 1)
  - 点击"续费"按钮
  - 选择续费时长
  - ⚡ **速度测试**: 续费应在6秒内完成（原来20秒）
  - 查看续费结果

#### 2.2 静态住宅选购
- [ ] **访问页面**: 侧边栏 -> 静态住宅 -> 静态住宅选购
- [ ] **选择套餐**: 
  - 查看不同时长的套餐和价格
- [ ] **购买IP** (优化 - Task 4)
  - 选择国家、地区
  - 选择时长
  - 点击购买
  - ⚡ **速度测试**: 购买应在6秒内完成（原来20秒）
  - 等待购买完成（显示进度）
  - 查看购买成功的IP信息

#### 2.3 专线代理（新功能 - Task 14）
- [ ] **访问页面**: 侧边栏 -> 静态住宅 -> 专线代理
- [ ] **页面展示**:
  - [ ] 显示"短视频专线"和"直播专线"两个选项
  - [ ] 每个选项都有描述和图标
  - [ ] 上方显示"代理选择参考图一"描述
  - [ ] 按钮应为禁用状态，显示"联系客服开通"

---

### ✅ 阶段3: 动态代理功能测试

#### 3.1 动态住宅管理
- [ ] **访问页面**: 侧边栏 -> 动态住宅 -> 动态住宅管理
- [ ] **查看通道列表**: 显示所有动态代理通道
- [ ] **提取IP**: 测试IP提取功能
- [ ] **查看流量统计**

#### 3.2 动态住宅选购
- [ ] **访问页面**: 侧边栏 -> 动态住宅 -> 动态住宅选购
- [ ] **查看套餐**: 查看流量套餐和价格
- [ ] **客服链接隐藏** (新功能 - Task 13)
  - [ ] 不应显示具体的Telegram链接
  - [ ] 应显示"请联系您的客服"
  - [ ] 客服按钮应为禁用状态

---

### ✅ 阶段4: 钱包与充值测试

#### 4.1 账户充值
- [ ] **访问页面**: 侧边栏 -> 我的钱包 -> 账户充值
- [ ] **快捷充值金额** (新功能 - Task 15)
  - [ ] 验证快捷金额已更改为: 2000, 5000, 10000, 50000, 100000
  - [ ] 点击快捷金额按钮自动填充
- [ ] **客服链接隐藏** (新功能 - Task 13)
  - [ ] 不应显示具体的Telegram链接
  - [ ] 应显示"请联系您的客服"样式
- [ ] **充值流程**: 
  - 选择或输入充值金额
  - 上传付款凭证
  - 提交充值申请

#### 4.2 充值记录
- [ ] **访问页面**: 侧边栏 -> 我的钱包 -> 充值记录
- [ ] **查看记录**: 显示充值历史
- [ ] **筛选功能**: 按状态筛选

#### 4.3 交易记录
- [ ] **访问页面**: 侧边栏 -> 我的钱包 -> 交易记录
- [ ] **查看记录**: 
  - 显示所有交易
  - 包含充值、购买、续费等类型

---

### ✅ 阶段5: 管理后台测试（管理员专用）

#### 5.1 用户管理
- [ ] **访问页面**: 侧边栏 -> 管理后台 -> 用户管理
- [ ] **查看用户列表**: 显示所有用户
- [ ] **用户详情**: 点击"详情"按钮
  - 查看用户基本信息
  - 查看用户IP列表
  - **全部交易记录** (修改 - Task 2)
    - 标签应显示"全部交易记录"（原来是"近期交易记录"）
- [ ] **余额调整**: 
  - 加款功能
  - 扣款功能
- [ ] **💀 删除用户** (新功能 - Task 16)
  - [ ] 点击"删除"按钮
  - [ ] 确认删除对话框弹出
  - [ ] 删除成功后用户从列表中移除
  - [ ] 验证不能删除管理员账户

#### 5.2 充值审核
- [ ] **访问页面**: 侧边栏 -> 管理后台 -> 充值审核
- [ ] **查看待审核**: 显示待审核的充值申请
- [ ] **筛选功能**: 
  - 按状态筛选
  - 按时间筛选
- [ ] **审核操作**:
  - 通过充值
  - 拒绝充值
  - 查看付款凭证

#### 5.3 订单管理
- [ ] **访问页面**: 侧边栏 -> 管理后台 -> 订单管理
- [ ] **查看订单**: 显示所有订单
- [ ] **订单详情**: 查看订单详细信息
- [ ] **筛选功能**: 按状态、类型筛选

#### 5.4 系统设置
- [ ] **访问页面**: 侧边栏 -> 管理后台 -> 系统设置
- [ ] **客服设置** (功能验证 - Task 8)
  - [ ] 查看客服链接配置
  - [ ] 修改客服链接
  - [ ] 保存设置
  - [ ] 验证修改是否生效
- [ ] **价格配置**: 查看和修改价格

---

### ✅ 阶段6: 移动端响应式测试（新功能 - Task 10-11）

#### 6.1 打开浏览器开发者工具
- Chrome: `F12` 或 `Ctrl+Shift+I`
- 点击"Toggle device toolbar"图标 (或按 `Ctrl+Shift+M`)

#### 6.2 测试不同屏幕尺寸
- [ ] **手机竖屏** (375x667 - iPhone SE)
  - [ ] 侧边栏变为汉堡菜单
  - [ ] 表格变为卡片式布局
  - [ ] 按钮和文字大小适配
  - [ ] 操作可以正常执行

- [ ] **手机横屏** (667x375)
  - [ ] 布局适配横屏
  - [ ] 内容不溢出

- [ ] **平板** (768x1024 - iPad)
  - [ ] 布局介于手机和桌面之间
  - [ ] 表格显示正常

- [ ] **桌面** (1920x1080)
  - [ ] 显示完整表格
  - [ ] 侧边栏展开

#### 6.3 重点测试页面（移动端）
1. **用户管理页面**
   - [ ] 用户卡片布局清晰
   - [ ] 操作按钮可点击
   - [ ] 筛选功能正常

2. **充值审核页面**
   - [ ] 卡片显示完整信息
   - [ ] 审核按钮可操作
   - [ ] 图片预览正常

3. **订单管理页面**
   - [ ] 订单卡片清晰
   - [ ] 状态显示正常

4. **静态代理管理**
   - [ ] IP卡片布局
   - [ ] 续费按钮可操作

---

## 🔍 重点测试的新功能

### 🔥 优先级1 (P0) - 必须测试

1. **✅ Task 2**: 交易记录标签改为"全部交易记录"
   - 位置: 管理后台 -> 用户管理 -> 详情 -> 交易记录标签

2. **⚡ Task 4**: 静态IP购买延迟优化
   - 位置: 静态住宅选购
   - 期望: 购买时间从20秒降低到6秒

3. **🌍 Task 5**: 国家/城市列表动态加载
   - 位置: 静态住宅管理 -> 筛选区域
   - 期望: 从985Proxy API实时获取

4. **💰 Task 6**: 收入趋势去硬编码
   - 位置: 管理后台仪表盘
   - 期望: 显示真实充值数据

5. **🔗 Task 13**: 隐藏客服链接
   - 位置: 充值页面、动态代理购买页面、个人中心
   - 期望: 不显示Telegram链接，显示通用文案

6. **🛣️ Task 14**: 专线代理页面
   - 位置: 静态住宅 -> 专线代理
   - 期望: 显示短视频和直播专线选项

7. **💵 Task 15**: 快捷充值金额修改
   - 位置: 账户充值
   - 期望: 2000, 5000, 10000, 50000, 100000

8. **🗑️ Task 16**: 用户删除功能
   - 位置: 管理后台 -> 用户管理
   - 期望: 可以删除普通用户，不能删除管理员

### 🔥 优先级2 (P1) - 建议测试

9. **📱 Task 10-11**: 移动端响应式
   - 使用Chrome开发者工具测试
   - 验证各页面在手机上的显示

---

## 🐛 测试时可能遇到的问题

### 问题1: 前端无法访问
**症状**: 打开 `http://localhost` 无响应

**解决方案**:
```bash
# 检查服务状态
docker compose ps

# 查看前端日志
docker logs proxyhub-frontend

# 重启前端
docker compose restart frontend
```

### 问题2: 登录失败
**症状**: 提示账号或密码错误

**解决方案**:
```bash
# 检查数据库是否有admin用户
docker exec -it proxyhub-postgres psql -U postgres -d proxyhub -c "SELECT email, role FROM users WHERE role='admin';"

# 如果没有，需要创建管理员账户
# 通过注册页面注册后，手动修改为管理员
docker exec -it proxyhub-postgres psql -U postgres -d proxyhub -c "UPDATE users SET role='admin' WHERE email='admin@example.com';"
```

### 问题3: 数据库表不存在
**症状**: 后端日志显示 "relation does not exist"

**解决方案**:
```bash
# 检查.env文件中的DATABASE_SYNC
cat .env | grep DATABASE_SYNC

# 应该是 DATABASE_SYNC=true

# 重启后端
docker compose restart backend

# 查看日志
docker logs proxyhub-backend
```

### 问题4: 985Proxy API调用失败
**症状**: 购买或续费IP时失败

**可能原因**:
- API密钥过期
- 网络问题
- 余额不足

**检查方法**:
```bash
# 查看后端日志
docker logs proxyhub-backend | grep "985Proxy"
```

---

## 📊 测试结果记录表

可以使用这个表格记录测试结果：

| 功能模块 | 测试项 | 状态 | 备注 |
|---------|--------|------|------|
| 登录注册 | 管理员登录 | ⬜ |  |
| 仪表盘 | 数据展示 | ⬜ |  |
| 仪表盘 | 收入趋势(Task 6) | ⬜ |  |
| 静态代理 | 国家筛选(Task 5) | ⬜ |  |
| 静态代理 | 城市筛选(Task 5) | ⬜ |  |
| 静态代理 | IP购买优化(Task 4) | ⬜ |  |
| 静态代理 | 专线代理(Task 14) | ⬜ |  |
| 用户管理 | 用户删除(Task 16) | ⬜ |  |
| 用户管理 | 交易记录(Task 2) | ⬜ |  |
| 充值 | 快捷金额(Task 15) | ⬜ |  |
| 充值 | 客服链接隐藏(Task 13) | ⬜ |  |
| 移动端 | 响应式布局(Task 10-11) | ⬜ |  |

状态标记:
- ⬜ 未测试
- ✅ 测试通过
- ❌ 测试失败
- ⚠️ 部分通过

---

## 🎯 测试完成标准

### 基础功能 (必须100%通过)
- ✅ 能正常登录
- ✅ 仪表盘数据显示
- ✅ 静态代理管理和购买
- ✅ 动态代理管理和购买
- ✅ 充值流程完整
- ✅ 管理后台功能正常

### 新增功能 (目标90%+通过)
- ✅ 所有P0新功能正常工作
- ✅ 移动端响应式基本可用
- ✅ 性能优化有明显改善

---

## 📞 遇到问题怎么办？

### 1. 查看服务日志
```bash
# 后端日志
docker logs proxyhub-backend --tail 100

# 前端日志
docker logs proxyhub-frontend --tail 100

# 数据库日志
docker logs proxyhub-postgres --tail 50
```

### 2. 重启服务
```bash
# 重启所有服务
docker compose restart

# 重启特定服务
docker compose restart backend
```

### 3. 完全重建
```bash
# 如果问题严重，完全重建
docker compose down
docker compose up -d --build
```

### 4. 检查数据库
```bash
# 连接数据库
docker exec -it proxyhub-postgres psql -U postgres -d proxyhub

# 查看所有表
\dt

# 查看用户
SELECT * FROM users LIMIT 5;

# 退出
\q
```

---

## ✅ 测试完成后

测试完成后，请记录：
1. ✅ 哪些功能正常
2. ❌ 哪些功能有问题
3. 💡 改进建议
4. 🐛 发现的Bug

然后告诉我测试结果，我会帮您修复任何问题！

---

**祝测试顺利！** 🎉

如有任何问题，随时告诉我！






