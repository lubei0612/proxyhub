# 时间显示修复说明（UTC→北京时间）

## 已创建工具函数

`frontend/src/utils/datetime.ts` - 提供以下函数：
- `formatBeijingTime(date, format?)` - 将UTC时间转换为北京时间并格式化
- `formatRelativeTime(date)` - 显示相对时间（如：5分钟前）
- `formatBeijingDate(date)` - 仅显示日期

## 已修复页面

✅ **frontend/src/views/billing/Transactions.vue** - 交易明细
✅ **frontend/src/views/admin/Dashboard.vue** - 管理后台仪表盘（最近订单）

## 需要修复的其他页面

以下页面需要将`dayjs(date).format(...)` 替换为 `formatBeijingTime(date, ...)`：

1. **frontend/src/views/admin/Users.vue** - 用户管理
   - `formatDate` 函数

2. **frontend/src/views/admin/Orders.vue** - 订单管理
   - `formatDate` 函数

3. **frontend/src/views/billing/RechargeOrders.vue** - 充值订单
   - `formatDate` 函数

4. **frontend/src/views/account/EventLog.vue** - 事件日志
   - `formatDate` 函数

5. **frontend/src/views/admin/RechargeApproval.vue** - 充值审核
   - `formatDate` 函数

6. **frontend/src/views/proxy/StaticManage.vue** - 静态代理管理
   - `formatDate`, `getReleaseTime` 函数

## 统一修改模式

### 修改前：
```typescript
import dayjs from 'dayjs';

const formatDate = (date: string) => {
  return dayjs(date).format('YYYY-MM-DD HH:mm:ss');
};
```

### 修改后：
```typescript
import { formatBeijingTime } from '@/utils/datetime';

const formatDate = (date: string) => {
  return formatBeijingTime(date, 'YYYY-MM-DD HH:mm:ss');
};
```

## 核心改动

主要两步：
1. 导入工具函数：`import { formatBeijingTime } from '@/utils/datetime';`
2. 替换dayjs调用：`dayjs(date).format(...)` → `formatBeijingTime(date, ...)`

## 注意事项

- 工具函数自动处理时区转换（UTC → UTC+8）
- 保持原有格式化模板不变
- 所有时间都统一显示为北京时间


