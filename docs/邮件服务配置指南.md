# 邮件服务配置指南

## 1. 获取SMTP服务器信息

### 常用邮箱SMTP配置：

**QQ邮箱：**
- SMTP服务器：`smtp.qq.com`
- 端口：465（SSL）
- 需要开启SMTP服务并获取授权码

**163邮箱：**
- SMTP服务器：`smtp.163.com`
- 端口：465（SSL）

**Gmail：**
- SMTP服务器：`smtp.gmail.com`
- 端口：587（TLS）

## 2. 配置环境变量

在 `backend/.env` 文件中添加：

```env
# 邮件服务配置
MAIL_HOST=smtp.qq.com
MAIL_PORT=465
MAIL_USER=your-email@qq.com
MAIL_PASSWORD=your-authorization-code
MAIL_FROM=ProxyHub <your-email@qq.com>
```

## 3. 已实现功能

✅ 后端邮件服务已实现（`backend/src/modules/notification/services/email.service.ts`）
✅ 支持HTML邮件模板
✅ 支持以下通知类型：
   - 充值成功
   - 充值拒绝
   - IP购买成功
   - IP即将过期提醒

## 4. 测试邮件功能

配置完成后，重启后端服务：
```bash
cd backend
npm run start:dev
```

测试方法：
1. 在系统中进行一次充值
2. 管理员批准充值
3. 检查用户邮箱是否收到通知

## 5. 注册验证码功能

需要额外实现：
- 修改注册接口，发送验证码邮件
- 添加验证码验证逻辑
- 验证码有效期管理（建议5分钟）

预计工作量：1-2小时


