# ProxyHub å¿«é€ŸAPIæµ‹è¯•æŒ‡å—

**ç›®çš„**: å¿«é€ŸéªŒè¯æ‰€æœ‰å‰åç«¯APIå¯¹æ¥å’Œè·¯ç”±é…ç½®  
**æ—¶é—´**: 30-45åˆ†é’Ÿ  
**å·¥å…·**: Chromeæµè§ˆå™¨ + DevTools (F12)  

---

## ğŸš€ å¯åŠ¨æœåŠ¡

### æ–¹æ³•1: ä½¿ç”¨batè„šæœ¬ï¼ˆæ¨èï¼‰
```
åŒå‡»è¿è¡Œé¡¹ç›®æ ¹ç›®å½•çš„: å¯åŠ¨ProxyHubæµ‹è¯•æœåŠ¡.bat
```

### æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨
```bash
# ç»ˆç«¯1
cd backend
npm run start:dev

# ç»ˆç«¯2
cd frontend
npm run dev
```

---

## âœ… æ ¸å¿ƒæµ‹è¯•æµç¨‹

### 1. ç”¨æˆ·ç«¯æµ‹è¯•ï¼ˆ20åˆ†é’Ÿï¼‰

#### 1.1 ç™»å½•
```
è®¿é—®: http://localhost:8080/login
è´¦æˆ·: user@example.com / user123
```

**éªŒè¯**: 
- [ ] DevTools Network: `POST /api/v1/auth/login` â†’ 200
- [ ] è·³è½¬åˆ°ä»ªè¡¨ç›˜
- [ ] å¯¼èˆªæ æ˜¾ç¤ºä½™é¢

---

#### 1.2 è´­ä¹°æ™®é€šIP
```
è·¯å¾„: é™æ€ä½å®… â†’ é™æ€ä½å®…é€‰è´­
æ“ä½œ: 
  1. é€‰æ‹©"æ™®é€š"IP
  2. é€‰æ‹©æ—¥æœ¬Tokyoï¼Œæ•°é‡1ï¼Œ30å¤©
  3. éªŒè¯ä»·æ ¼: $10/æœˆ
  4. æäº¤è®¢å•
```

**DevToolså…³é”®éªŒè¯**:
```
Network â†’ æ‰¾åˆ°è¿™3ä¸ªè¯·æ±‚:

1. POST /api/v1/price/calculate
   Status: 201 âœ…
   Request: {productType: "static-residential", ...}
   Response: {breakdown: [{location: "JP/Tokyo", unitPrice: 10}]}

2. POST /api/v1/proxy/static/purchase  
   Status: 200/201 âœ…
   Request: {items: [{country: "JP", city: "Tokyo"}], ...}

3. GET /api/v1/users/profile
   Response: {balance: (åŸä½™é¢ - 10)}
```

**é¡µé¢éªŒè¯**:
- [ ] ä»·æ ¼æ˜¾ç¤º$10/æœˆ
- [ ] è®¢å•æäº¤æˆåŠŸ
- [ ] ä½™é¢å‡å°‘$10
- [ ] é™æ€ä½å®…ç®¡ç†æ˜¾ç¤ºæ–°IP

---

#### 1.3 è´­ä¹°åŸç”ŸIP
```
æ“ä½œ:
  1. é€‰æ‹©"åŸç”Ÿ"IP
  2. é€‰æ‹©ç¾å›½LAï¼Œæ•°é‡1ï¼Œ30å¤©
  3. éªŒè¯ä»·æ ¼: $10/æœˆ
  4. æäº¤è®¢å•
```

**DevToolså…³é”®éªŒè¯**:
```
Network â†’ POST /api/v1/price/calculate
  Request: {productType: "static-residential-native", ...}
  Status: 201 âœ… (ä¸å†404!)
  Response: {breakdown: [...]}
```

**éªŒè¯**: 
- [ ] åŸç”ŸIP APIä¸è¿”å›404
- [ ] ä»·æ ¼æ˜¾ç¤º$10/æœˆ
- [ ] è´­ä¹°æˆåŠŸï¼Œä½™é¢å‡å°‘

---

#### 1.4 å……å€¼ç”³è¯·
```
è·¯å¾„: é’±åŒ…å……å€¼
æ“ä½œ:
  é‡‘é¢: 100
  æ”¯ä»˜æ–¹å¼: æ”¯ä»˜å®
  äº¤æ˜“å•å·: TEST001
  æäº¤
```

**DevToolséªŒè¯**:
```
Network â†’ POST /api/v1/billing/recharge
  Status: 200/201 âœ…
  Response: {id: 1, status: "pending"}
```

**éªŒè¯**:
- [ ] æäº¤æˆåŠŸ
- [ ] å……å€¼è®°å½•æ˜¾ç¤º"å¾…å®¡æ ¸"

---

#### 1.5 æŸ¥çœ‹æ•°æ®
```
æ£€æŸ¥è¿™äº›é¡µé¢æ•°æ®æ˜¯å¦æ­£ç¡®:
  â€¢ é™æ€ä½å®…ç®¡ç†: æ˜¾ç¤º2ä¸ªIP
  â€¢ è®¢å•è®°å½•: æ˜¾ç¤º2ä¸ªè®¢å•
  â€¢ äº¤æ˜“æ˜ç»†: æ˜¾ç¤º2ç¬”æ”¯å‡º
```

**éªŒè¯**:
- [ ] æ‰€æœ‰åˆ—è¡¨æ­£ç¡®æ˜¾ç¤º
- [ ] æ•°æ®ä¸€è‡´

---

### 2. ç®¡ç†ç«¯æµ‹è¯•ï¼ˆ15åˆ†é’Ÿï¼‰

#### 2.1 ç®¡ç†å‘˜ç™»å½•
```
è®¿é—®: http://localhost:8080/admin/login
è´¦æˆ·: admin@example.com / admin123
```

**éªŒè¯**:
- [ ] DevTools: `POST /api/v1/auth/admin-login` â†’ 200
- [ ] è·³è½¬åˆ°ç®¡ç†åå°

---

#### 2.2 æŸ¥çœ‹ç”¨æˆ·è®¢å•
```
è·¯å¾„: è®¢å•ç®¡ç†
```

**DevToolséªŒè¯**:
```
Network â†’ GET /api/v1/orders/admin/all
  Status: 200 âœ…
  Response: {data: [...], total: >= 2}
```

**å…³é”®éªŒè¯**:
- [ ] **æ˜¾ç¤ºç”¨æˆ·è´­ä¹°çš„2ä¸ªè®¢å•**
- [ ] åŒ…å«ç”¨æˆ·ä¿¡æ¯
- [ ] é‡‘é¢æ­£ç¡®

---

#### 2.3 å……å€¼å®¡æ ¸
```
è·¯å¾„: å……å€¼å®¡æ ¸
æ“ä½œ: æ‰¾åˆ°ç”¨æˆ·çš„å……å€¼ç”³è¯·ï¼Œç‚¹å‡»"æ‰¹å‡†"
```

**DevToolséªŒè¯**:
```
Network â†’ ä¾æ¬¡:
1. GET /api/v1/billing/admin/recharges
   Response: [{id: 1, status: "pending", amount: 100}]

2. PUT /api/v1/billing/recharge/1/approve
   Status: 200 âœ…
```

**éªŒè¯**:
- [ ] æ‰¹å‡†æˆåŠŸ
- [ ] çŠ¶æ€æ›´æ–°ä¸º"å·²æ‰¹å‡†"

---

#### 2.4 ä»·æ ¼è¦†ç›–ç®¡ç†
```
è·¯å¾„: ä»·æ ¼ç®¡ç† â†’ ä»·æ ¼è¦†ç›–ç®¡ç†
```

**DevToolséªŒè¯**:
```
Network â†’ GET /api/v1/price/ip-pool
  Status: 200 âœ…
  Response: {data: [...26ä¸ªåœ°åŒº], total: 26}
```

**éªŒè¯**:
- [ ] æ˜¾ç¤º26ä¸ªåœ°åŒº
- [ ] æ—¥æœ¬Tokyoæ˜¾ç¤º$10è¦†ç›–ä»·æ ¼
- [ ] å¯ä»¥ä¿®æ”¹ä»·æ ¼

---

### 3. æ•°æ®æµéªŒè¯ï¼ˆ10åˆ†é’Ÿï¼‰

#### 3.1 ç®¡ç†å‘˜ä¿®æ”¹ä»·æ ¼ â†’ ç”¨æˆ·çœ‹åˆ°

**ç®¡ç†å‘˜æ“ä½œ**:
```
ä»·æ ¼è¦†ç›–ç®¡ç† â†’ éŸ©å›½Seoul â†’ ä¿®æ”¹ä¸º$15 â†’ ä¿å­˜
```

**DevTools**:
```
POST /api/v1/price/overrides/batch
  Request: {updates: [{country: "KR", city: "Seoul", overridePrice: 15}]}
  Status: 200 âœ…
```

**åˆ‡æ¢åˆ°ç”¨æˆ·**:
```
é™æ€ä½å®…é€‰è´­ â†’ æ™®é€šIP â†’ æŸ¥çœ‹éŸ©å›½Seoul
```

**DevTools**:
```
POST /api/v1/price/calculate
  Response: {breakdown: [{location: "KR/Seoul", unitPrice: 15}]}
```

**éªŒè¯**:
- [ ] ç”¨æˆ·çœ‹åˆ°æ–°ä»·æ ¼$15/æœˆ

---

#### 3.2 å……å€¼æ‰¹å‡† â†’ ç”¨æˆ·ä½™é¢æ›´æ–°

**åˆ‡æ¢å›ç”¨æˆ·è´¦æˆ·**:
```
æŸ¥çœ‹å¯¼èˆªæ ä½™é¢
```

**éªŒè¯**:
- [ ] ä½™é¢å¢åŠ $100ï¼ˆå……å€¼å·²æ‰¹å‡†ï¼‰
- [ ] å……å€¼è®°å½•çŠ¶æ€ä¸º"å·²æ‰¹å‡†"
- [ ] äº¤æ˜“æ˜ç»†æ˜¾ç¤ºå……å€¼è®°å½•

---

## ğŸ“Š å¿«é€Ÿæ£€æŸ¥æ¸…å•

### ç”¨æˆ·ç«¯API
```
âœ… POST   /api/v1/auth/login              - ç™»å½•
âœ… POST   /api/v1/price/calculate         - ä»·æ ¼è®¡ç®—ï¼ˆæ™®é€šï¼‰
âœ… POST   /api/v1/price/calculate         - ä»·æ ¼è®¡ç®—ï¼ˆåŸç”Ÿï¼Œä¸404ï¼‰
âœ… POST   /api/v1/proxy/static/purchase   - è´­ä¹°ä»£ç†
âœ… GET    /api/v1/proxy/static/list       - ä»£ç†åˆ—è¡¨
âœ… GET    /api/v1/orders                  - è®¢å•åˆ—è¡¨
âœ… GET    /api/v1/billing/transactions    - äº¤æ˜“æ˜ç»†
âœ… POST   /api/v1/billing/recharge        - å……å€¼ç”³è¯·
âœ… GET    /api/v1/users/profile           - ç”¨æˆ·ä¿¡æ¯ï¼ˆä½™é¢æ›´æ–°ï¼‰
```

### ç®¡ç†ç«¯API
```
âœ… POST   /api/v1/auth/admin-login        - ç®¡ç†å‘˜ç™»å½•
âœ… GET    /api/v1/orders/admin/all        - æ‰€æœ‰è®¢å•
âœ… GET    /api/v1/billing/admin/recharges - å……å€¼å®¡æ ¸åˆ—è¡¨
âœ… PUT    /api/v1/billing/recharge/:id/approve - æ‰¹å‡†å……å€¼
âœ… GET    /api/v1/price/ip-pool           - IPæ± åˆ—è¡¨
âœ… POST   /api/v1/price/overrides/batch   - æ‰¹é‡ä»·æ ¼è¦†ç›–
âœ… GET    /api/v1/admin/users             - ç”¨æˆ·åˆ—è¡¨
```

### æ•°æ®æµéªŒè¯
```
âœ… ç”¨æˆ·è´­ä¹° â†’ ç®¡ç†å‘˜å¯è§è®¢å•
âœ… ç®¡ç†å‘˜æ‰¹å‡†å……å€¼ â†’ ç”¨æˆ·ä½™é¢æ›´æ–°
âœ… ç®¡ç†å‘˜ä¿®æ”¹ä»·æ ¼ â†’ ç”¨æˆ·çœ‹åˆ°æ–°ä»·æ ¼
```

**æ€»è®¡**: 16ä¸ªæ ¸å¿ƒAPI + 3ä¸ªæ•°æ®æµ

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

**æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œå¦‚æœ**:
- [ ] æ‰€æœ‰APIè¯·æ±‚è¿”å›200/201
- [ ] ç”¨æˆ·æ“ä½œåœ¨ç®¡ç†åå°å¯è§
- [ ] ä½™é¢å˜åŒ–æ­£ç¡®åŒæ­¥
- [ ] ä»·æ ¼è¦†ç›–æ­£ç¡®åº”ç”¨
- [ ] è®¢å•æ•°æ®å®Œæ•´ä¸€è‡´

**æµ‹è¯•å®Œæˆï¼** âœ…

---

## ğŸ“ é—®é¢˜è®°å½•

| API | çŠ¶æ€ç  | é—®é¢˜ | ä¸¥é‡æ€§ |
|-----|--------|------|--------|
| | | | |

---

**è¯¦ç»†æµ‹è¯•æŒ‡å—**: `docs/spec-workflow/å…¨é¢APIè·¯ç”±æµ‹è¯•/æµ‹è¯•æ‰§è¡ŒæŒ‡å—.md`  
**é—®é¢˜åé¦ˆ**: è®°å½•åˆ°é—®é¢˜è®°å½•è¡¨


